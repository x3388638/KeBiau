{"version":3,"sources":["Navigation.jsx","App.jsx","Loading.jsx","CourseList.jsx","CourseGrid.jsx","CourseTable.jsx","ToolBar.jsx","CourseTableContainer.jsx","Home.jsx","Share.jsx","registerServiceWorker.js","index.js"],"names":["NavigationBar","styled","Navbar","Hide850","span","UserName","Navigation","props","toggleNavbar","bind","toggleLoginTooltip","toggleLogoutTooltip","state","navbarIsOpen","loginTooltip","logoutTooltip","this","setState","prevState","providerName","provider","window","firebase","auth","FacebookAuthProvider","GoogleAuthProvider","signInWithPopup","then","location","reload","catch","error","errorCode","code","errorMessage","message","console","signOut","route","context","router","user","loginStatusInit","isLogin","uid","color","dark","expand","href","process","src","alt","height","onClick","isOpen","navbar","className","match","path","to","aria-hidden","target","rel","displayName","id","handleLogout","delay","show","hide","placement","toggle","nav","inNavbar","caret","right","handleLogin","React","Component","contextTypes","PropTypes","object","RelativeContainer","Container","App","db","database","onAuthStateChanged","Object","assign","providerData","uuid","children","childContextTypes","LoadingWrapper","div","marginTop","Loading","loading","width","PureComponent","CommonRow","TableHeader","TableRow","DeptSelector","selected","handleSelect","e","value","onChangeDept","onChange","keys","deptList","map","val","i","key","filterCourse","size","onFilterCourse","filterConflict","onFilterConflict","CourseList","list","courseList","style","overflow","maxHeight","background","length","Fragment","isConflict","data-uuid","cid","cname","classes","time","teacher","grade","year","disabled","onAddCourse","EditBtnContainer","DelBtn","EditBtn","Grid","td","bg","hex","result","exec","r","parseInt","g","b","_hexToRgb","Math","sqrt","CourseGrid","mouseEnter","handleMouseEnter","handleMouseLeave","handleDel","handleEdit","shared","parentNode","getAttribute","rowspan","onDelCourse","dayOfWeek","onEditCourse","title","desc","rowSpan","onMouseEnter","onMouseLeave","WeekendTitle","th","CourseTable","classArr","document","getElementById","replace","trim","split","join","setTimeout","bordered","responsive","tableLayout","tableData","sat","onDelSatOrSun","sun","t","data-time","course","courseData","ToolBar","exportDropdownOpen","clearDropdownOpen","toggleExportDropdown","toggleClearDropdown","querySelectorAll","forEach","setAttribute","html","innerHTML","open","encodeURIComponent","preventDefault","html2canvas","onrendered","canvas","Canvas2Image","saveAsPNG","btnStyle","cursor","marginBottom","onSave","onShare","handleExportExcel","handleExportPNG","onReColor","onReTable","onClickCustom","CourseTableContainer","customTable","0","1","2","3","4","5","6","modalEditCourse","modalTitle","modalCustomCourseOpen","modalFilterCourseOpen","filterCourseForm","timeMap","a","c","d","z","f","h","j","k","l","m","timeOrder","getCourseList","getCourseData","changeDept","getTableData","checkConflict","handleDelSatOrSun","handleDelCourse","handleOpenEditModal","toggleModalEditCourse","handleEditCourse","handleReColor","handleReTable","toggleModalCustomCourse","handleAddCustomCourse","handleSave","handleShare","toggleModalFilterCourse","handleFilterCourse","handleClearFilterCourse","handleFilterCourseChange","dept","sessionCourseList","sessionStorage","JSON","parse","ref","once","snapshot","stringify","shouldAddCourse","toLowerCase","sections","apartCourseTime","timeValid","some","valid","validateTime","alert","msg","conflict","cloneDeep","index","startTime","nextTimeOrder","indexOf","nextTime","nextTimeCourse","test","last","err","current","charCodeAt","push","day","dayOrder","set","hash","Date","now","random","toString","substring","prompt","event","field","isFilterCourse","parsedCourseList","reduce","courseKey","every","toUpperCase","includes","padding","boxShadow","xs","row","for","sm","type","defaultValue","placeholder","verticalAlign","Home","ShareContainer","Share","routeHash","params","data","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","ReactDOM","render","exact","component","from","URL","origin","addEventListener","fetch","response","status","headers","get","ready","unregister","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.41bdd30a.chunk.js","sourcesContent":["import React from 'react'\nimport {\n  Collapse,\n  Navbar,\n  NavbarToggler,\n  NavbarBrand,\n  Nav,\n  NavItem,\n  NavLink,\n  Tooltip,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem\n} from 'reactstrap'\nimport { Link } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nconst NavigationBar = styled(Navbar)`\n  z-index: 100;\n  padding: 0.3rem 1rem;\n`\n\nconst Hide850 = styled.span`\n  @media (max-width: 850px) and (min-width: 576px) {\n    display: none;\n  }\n`\n\nconst UserName = styled.span`\n  @media (max-width: 1000px) and (min-width: 576px) {\n    display: none;\n  }\n`\n\nexport default class Navigation extends React.Component {\n  constructor(props) {\n    super(props)\n    this.toggleNavbar = this.toggleNavbar.bind(this)\n    this.toggleLoginTooltip = this.toggleLoginTooltip.bind(this)\n    this.toggleLogoutTooltip = this.toggleLogoutTooltip.bind(this)\n    this.state = {\n      navbarIsOpen: false,\n      loginTooltip: false,\n      logoutTooltip: false\n    }\n  }\n\n  toggleNavbar() {\n    this.setState((prevState) => ({\n      navbarIsOpen: !prevState.navbarIsOpen\n    }))\n  }\n\n  toggleLoginTooltip() {\n    this.setState((prevState) => ({\n      loginTooltip: !prevState.loginTooltip\n    }))\n  }\n\n  toggleLogoutTooltip() {\n    this.setState((prevState) => ({\n      logoutTooltip: !prevState.logoutTooltip\n    }))\n  }\n\n  handleLogin(providerName) {\n    let provider\n    switch (providerName) {\n      case 'fb': {\n        provider = new window.firebase.auth.FacebookAuthProvider()\n        break\n      }\n\n      case 'google':\n      default: {\n        provider = new window.firebase.auth.GoogleAuthProvider()\n        break\n      }\n    }\n\n    window.firebase\n      .auth()\n      .signInWithPopup(provider)\n      .then(function () {\n        window.location.reload()\n      })\n      .catch(function (error) {\n        const errorCode = error.code\n        const errorMessage = error.message\n        console.error(`[${errorCode}] ${errorMessage}`)\n      })\n  }\n\n  handleLogout() {\n    window.firebase\n      .auth()\n      .signOut()\n      .then(function () {\n        window.location.reload()\n      })\n      .catch(function (error) {\n        console.error(error)\n      })\n  }\n\n  render() {\n    const route = this.context.router.route\n    const user = this.context.user\n    const loginStatusInit = !!user\n    const isLogin = loginStatusInit && !!user.uid\n    return (\n      <NavigationBar color=\"dark\" dark expand=\"sm\">\n        <NavbarBrand href={process.env.REACT_APP_BASE_URL}>\n          <img\n            src={`${process.env.REACT_APP_BASE_URL}/logo.png`}\n            alt=\"\"\n            height=\"31px\"\n          />{' '}\n          自己的課表自己排 2.0\n        </NavbarBrand>\n        <NavbarToggler onClick={this.toggleNavbar} />\n        <Collapse isOpen={this.state.navbarIsOpen} navbar>\n          <Nav navbar>\n            <NavItem>\n              <Link\n                className={\n                  route.match.path === '/' ? 'active nav-link' : ' nav-link'\n                }\n                to=\"/\"\n              >\n                <i className=\"fa fa-table\" aria-hidden=\"true\"></i>{' '}\n                <span className=\"d-sm-none d-md-inline\">\n                  <Hide850>我的</Hide850>課表\n                </span>\n              </Link>\n            </NavItem>\n            {/* <NavItem>\n              <Link\n                className={\n                  route.match.path === '/exchange'\n                    ? 'active nav-link'\n                    : ' nav-link'\n                }\n                to=\"/exchange\"\n              >\n                <i className=\"fa fa-exchange\" aria-hidden=\"true\"></i>{' '}\n                <span className=\"d-sm-none d-md-inline\">\n                  換課<Hide850>平台</Hide850>\n                </span>\n              </Link>\n            </NavItem>\n            <NavItem>\n              <Link\n                className={\n                  route.match.path === '/review'\n                    ? 'active nav-link'\n                    : ' nav-link'\n                }\n                to=\"/review\"\n              >\n                <i className=\"fa fa-thumbs-up\" aria-hidden=\"true\"></i>{' '}\n                <span className=\"d-sm-none d-md-inline\">\n                  <Hide850>課程</Hide850>評價\n                </span>\n              </Link>\n            </NavItem> */}\n            <NavItem>\n              <NavLink\n                href=\"https://fb.com/MOLi.rocks/posts/2104134533131853\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <span>\n                  <i className=\"fa fa-question-circle\" aria-hidden=\"true\"></i>{' '}\n                  <span className=\"d-sm-none d-md-inline\">選課教學</span>\n                </span>\n              </NavLink>\n            </NavItem>\n            <NavItem>\n              <NavLink\n                href=\"https://github.com/x3388638/KeBiau/issues\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <span>\n                  <i\n                    className=\"fa fa-exclamation-circle\"\n                    aria-hidden=\"true\"\n                  ></i>{' '}\n                  <span className=\"d-sm-none d-md-inline\">回報</span>\n                </span>\n              </NavLink>\n            </NavItem>\n          </Nav>\n          <Nav className=\"ml-auto\" navbar>\n            {loginStatusInit && isLogin && (\n              <NavItem>\n                <NavLink>\n                  <UserName className=\"ml-2\">{user.displayName}</UserName>\n                </NavLink>\n              </NavItem>\n            )}\n            {loginStatusInit && isLogin ? (\n              <NavItem>\n                <NavLink id=\"LogoutBtn\" href=\"#\" onClick={this.handleLogout}>\n                  <i className=\"fa fa-sign-out\" aria-hidden=\"true\"></i>{' '}\n                  <span className=\"d-inline d-sm-none\">登出</span>\n                  <Tooltip\n                    delay={{ show: 0, hide: 0 }}\n                    placement=\"left\"\n                    isOpen={this.state.logoutTooltip}\n                    target=\"LogoutBtn\"\n                    toggle={this.toggleLogoutTooltip}\n                  >\n                    登出\n                  </Tooltip>\n                </NavLink>\n              </NavItem>\n            ) : (\n              <UncontrolledDropdown nav inNavbar>\n                <DropdownToggle nav caret>\n                  登入\n                </DropdownToggle>\n                <DropdownMenu right>\n                  <DropdownItem\n                    onClick={() => {\n                      this.handleLogin('fb')\n                    }}\n                  >\n                    <i className=\"fa fa-facebook-square\" aria-hidden=\"true\"></i>{' '}\n                    Facebook\n                  </DropdownItem>\n                  <DropdownItem\n                    onClick={() => {\n                      this.handleLogin('google')\n                    }}\n                  >\n                    <i className=\"fa fa-google\" aria-hidden=\"true\"></i> Google\n                  </DropdownItem>\n                </DropdownMenu>\n              </UncontrolledDropdown>\n            )}\n          </Nav>\n        </Collapse>\n      </NavigationBar>\n    )\n  }\n}\n\nNavigation.contextTypes = {\n  user: PropTypes.object,\n  router: PropTypes.object\n}\n","import React from 'react'\nimport { Container } from 'reactstrap'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nimport Navigation from './Navigation.jsx'\n\nimport './App.css'\n\nconst RelativeContainer = styled(Container)`\n  position: relative;\n`\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      user: null\n    }\n\n    this.db = window.firebase.database()\n    window.firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        this.setState({\n          user: Object.assign({}, user.providerData[0], {\n            uuid: user.uid\n          })\n        })\n      } else {\n        this.setState({\n          user: {\n            uid: null\n          }\n        })\n      }\n    })\n  }\n\n  getChildContext() {\n    return {\n      user: this.state.user\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <Navigation />\n        <RelativeContainer>{this.props.children}</RelativeContainer>\n      </div>\n    )\n  }\n}\n\nApp.childContextTypes = {\n  user: PropTypes.object\n}\n","import React from 'react'\nimport { BarLoader } from 'react-spinners'\nimport styled from 'styled-components'\n\nconst LoadingWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: ${(props) => `${props.marginTop || 20}px`};\n`\n\nexport default class Loading extends React.PureComponent {\n  render() {\n    return (\n      <LoadingWrapper {...this.props}>\n        <BarLoader color=\"#666\" loading height={5} width={200} />\n      </LoadingWrapper>\n    )\n  }\n}\n","import React from 'react'\nimport { Button } from 'reactstrap'\nimport styled from 'styled-components'\nimport Loading from './Loading'\n\nconst CommonRow = styled.div`\n  display: grid;\n  grid-template-columns: 2fr 3fr 1fr 1fr 2fr 3fr 1fr 1fr 1fr;\n  grid-gap: 2px;\n  margin: 5px;\n`\n\nconst TableHeader = styled(CommonRow)`\n  margin: 0 5px 5px;\n  position: sticky;\n  top: 0;\n  left: 0;\n  background: #fff;\n  z-index: 10;\n  border-bottom: 1px solid #adadad;\n  & span {\n    padding: 10px 0px;\n    font-weight: bold;\n  }\n\n  @media screen and (max-width: 992px) {\n    display: none;\n  }\n`\n\nconst TableRow = styled(CommonRow)`\n  background: #f9f9f9;\n  border-radius: 2px;\n  & span {\n    display: flex;\n    align-items: center;\n    padding: 5px;\n    &.TableRow__link,\n    &.TableRow__btn {\n      justify-content: center;\n    }\n  }\n\n  @media screen and (max-width: 991px) {\n    padding: 5px;\n    box-shadow: 1px 1px 2px 0px #878787;\n    margin-bottom: 10px;\n    grid-template-columns: 1fr 3fr 1fr;\n    grid-template-rows: 1fr 1fr 1fr 1fr;\n    grid-template-areas:\n      'cid cname classes'\n      'teacher teacher teacher'\n      'time time time'\n      'location location location'\n      'link link btn';\n    & span {\n      padding: 0 8px;\n    }\n\n    & span.TableRow__cid {\n      grid-area: cid;\n    }\n    & span.TableRow__cname {\n      grid-area: cname;\n      justify-content: center;\n      font-weight: bold;\n    }\n    & span.TableRow__classes {\n      grid-area: classes;\n      justify-content: flex-end;\n      &::after {\n        content: '班';\n        padding-left: 2px;\n      }\n    }\n    & span.TableRow__time {\n      grid-area: time;\n      &::before {\n        content: '時間:';\n        padding-right: 2px;\n      }\n    }\n    & span.TableRow__location {\n      grid-area: location;\n      &::before {\n        content: '地點:';\n        padding-right: 2px;\n      }\n    }\n    & span.TableRow__teacher {\n      grid-area: teacher;\n      &::before {\n        content: '教師:';\n        padding-right: 2px;\n      }\n    }\n    & span.TableRow__grade {\n      display: none;\n    }\n    & span.TableRow__link {\n      grid-area: link;\n      justify-content: flex-end;\n    }\n    & span.TableRow__btn {\n      grid-area: btn;\n      & button {\n        width: 100%;\n      }\n    }\n  }\n`\n\nclass DeptSelector extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      selected: ''\n    }\n\n    this.handleSelect = this.handleSelect.bind(this)\n  }\n\n  componentDidMount() {\n    this.setState({\n      selected: '通識'\n    })\n  }\n\n  handleSelect(e) {\n    this.setState({\n      selected: e.target.value\n    })\n\n    this.props.onChangeDept(e.target.value)\n  }\n\n  render() {\n    return (\n      <div className=\"mb-2\">\n        <strong>開課單位：</strong>\n        <select value={this.state.selected} onChange={this.handleSelect}>\n          {Object.keys(this.props.deptList).map((val, i) => {\n            return (\n              <option key={i} value={val}>\n                {val}\n              </option>\n            )\n          })}\n        </select>{' '}\n        <Button\n          className={this.props.filterCourse ? 'active' : ''}\n          color={this.props.filterCourse ? 'danger' : 'light'}\n          size=\"sm\"\n          onClick={this.props.onFilterCourse}\n        >\n          篩選課程\n        </Button>{' '}\n        <Button\n          className={this.props.filterConflict ? 'active' : ''}\n          color={this.props.filterConflict ? 'danger' : 'light'}\n          size=\"sm\"\n          onClick={this.props.onFilterConflict}\n        >\n          {this.props.filterConflict ? '取消過濾' : '過濾衝堂'}\n        </Button>\n        <a\n          className=\"float-right mr-2 text-warning\"\n          href=\"https://ccweb6.ncnu.edu.tw/student/DeptQuerylist.php\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <i className=\"fa fa-sitemap\" aria-hidden=\"true\"></i> 各系所課程地圖\n        </a>\n      </div>\n    )\n  }\n}\n\nexport default class CourseList extends React.Component {\n  render() {\n    const list = this.props.courseList\n    return (\n      <div>\n        <DeptSelector {...this.props} />\n        <div\n          style={{\n            overflow: 'auto',\n            maxHeight: '487px',\n            background: '#fff',\n            width: '100%'\n          }}\n        >\n          {!list.length && <Loading />}\n\n          {!!list.length && (\n            <React.Fragment>\n              <TableHeader>\n                <span>課號</span>\n                <span>課程名稱</span>\n                <span>班別</span>\n                <span>時段</span>\n                <span>授課地點</span>\n                <span>教師</span>\n                <span>年級</span>\n                <span></span>\n                <span></span>\n              </TableHeader>\n              {Object.keys(list).map((val) =>\n                this.props.filterConflict && list[val].isConflict ? null : (\n                  <TableRow key={val} data-uuid={val}>\n                    <span className=\"TableRow__cid\">{list[val].cid}</span>\n                    <span className=\"TableRow__cname\">{list[val].cname}</span>\n                    <span className=\"TableRow__classes\">\n                      {list[val].classes}\n                    </span>\n                    <span className=\"TableRow__time\">{list[val].time}</span>\n                    <span className=\"TableRow__location\">\n                      {list[val].location}\n                    </span>\n                    <span className=\"TableRow__teacher\">\n                      {list[val].teacher}\n                    </span>\n                    <span className=\"TableRow__grade\">{list[val].grade}</span>\n                    <span className=\"TableRow__link\">\n                      <a\n                        href={`https://ccweb6.ncnu.edu.tw/student/aspmaker_course_opened_detail_viewview.php?showdetail=&year=${list[val].year}&courseid=${list[val].cid}&_class=${list[val].classes}&modal=0`}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        課綱{' '}\n                        <i\n                          className=\"fa fa-external-link\"\n                          aria-hidden=\"true\"\n                        ></i>\n                      </a>\n                    </span>\n                    <span className=\"TableRow__btn\">\n                      <Button\n                        color=\"success\"\n                        size=\"sm\"\n                        disabled={list[val].isConflict ? true : false}\n                        onClick={() => {\n                          this.props.onAddCourse(list[val], true)\n                        }}\n                      >\n                        {list[val].isConflict ? '衝堂' : '加入'}\n                      </Button>\n                    </span>\n                  </TableRow>\n                )\n              )}\n            </React.Fragment>\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst EditBtnContainer = styled.span`\n  top: -8px;\n  position: relative;\n`\n\nconst DelBtn = styled.span`\n  display: none;\n  cursor: pointer;\n  color: #c9302c !important;\n  font-size: 20px;\n`\n\nconst EditBtn = styled.i`\n  display: none;\n  cursor: pointer;\n  font-size: 14px;\n  &:hover {\n    color: #0275d8;\n  }\n`\n\nconst Grid = styled.td`\n  vertical-align: middle !important;\n  background: ${(props) => `${props.bg} !important` || 'none'};\n  color: ${_getTextColor};\n  &:hover {\n    background: #fafafa;\n    ${DelBtn} {\n      display: initial;\n    }\n\n    ${EditBtn} {\n      display: initial;\n    }\n  }\n`\n\nfunction _getTextColor(props) {\n  if (props.bg) {\n    const { r, g, b } = _hexToRgb(props.bg)\n    const bri = Math.sqrt(r * r * 0.241 + g * g * 0.691 + b * b * 0.068)\n    if (bri < 125) {\n      return '#fff'\n    }\n\n    return ''\n  }\n\n  return ''\n}\n\nfunction _hexToRgb(hex) {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n  return result\n    ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n      }\n    : null\n}\n\nexport default class CourseGrid extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      mouseEnter: false\n    }\n\n    this.handleMouseEnter = this.handleMouseEnter.bind(this)\n    this.handleMouseLeave = this.handleMouseLeave.bind(this)\n    this.handleDel = this.handleDel.bind(this)\n    this.handleEdit = this.handleEdit.bind(this)\n  }\n\n  handleMouseEnter() {\n    this.setState({\n      mouseEnter: true\n    })\n  }\n\n  handleMouseLeave() {\n    this.setState({\n      mouseEnter: false\n    })\n  }\n\n  handleDel(e) {\n    if (this.props.shared) return\n    const time = e.target.parentNode.parentNode.parentNode.getAttribute(\n      'data-time'\n    )\n    const rowspan = e.target.parentNode.parentNode.getAttribute('rowspan')\n    this.props.onDelCourse(time, rowspan, this.props.dayOfWeek)\n  }\n\n  handleEdit(e) {\n    if (this.props.shared) return\n    this.props.onEditCourse({\n      time: e.target.parentNode.parentNode.parentNode.parentNode.getAttribute(\n        'data-time'\n      ),\n      dayOfWeek: this.props.dayOfWeek,\n      title: this.props.title,\n      desc: this.props.desc,\n      bg: this.props.bg\n    })\n  }\n\n  hexToRgb(hex) {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n    return result\n      ? {\n          r: parseInt(result[1], 16),\n          g: parseInt(result[2], 16),\n          b: parseInt(result[3], 16)\n        }\n      : null\n  }\n\n  render() {\n    return (\n      <Grid\n        bg={this.props.bg}\n        rowSpan={this.props.rowspan || 1}\n        onMouseEnter={this.handleMouseEnter}\n        onMouseLeave={this.handleMouseLeave}\n      >\n        {!this.props.shared && this.props.title && this.state.mouseEnter && (\n          <span className=\"float-right mr-2\">\n            <DelBtn className=\"text-danger\" onClick={this.handleDel}>\n              &times;\n            </DelBtn>\n            <br />\n            <EditBtnContainer>\n              <EditBtn\n                className=\"fa fa-pencil\"\n                aria-hidden=\"true\"\n                onClick={this.handleEdit}\n              ></EditBtn>\n            </EditBtnContainer>\n          </span>\n        )}\n\n        {this.props.title && this.props.title}\n        <br className=\"uniBR\" />\n        {this.props.desc && this.props.desc}\n      </Grid>\n    )\n  }\n}\n","import React from 'react'\nimport { Table } from 'reactstrap'\nimport styled from 'styled-components'\n\nimport CourseGrid from './CourseGrid'\n\nconst DelBtn = styled.i`\n  display: none;\n  &:hover {\n    cursor: pointer;\n    color: #c9302c !important;\n  }\n`\n\nconst WeekendTitle = styled.th`\n  width: auto;\n  &:hover {\n    ${DelBtn} {\n      display: initial;\n    }\n  }\n`\n\nexport default class CourseTable extends React.Component {\n  componentDidUpdate() {\n    const classArr = document\n      .getElementById('CustomTable')\n      .className.replace('table-bordered', '')\n      .trim()\n      .split(' ')\n    document.getElementById('CustomTable').className = classArr.join(' ')\n    setTimeout(() => {\n      document.getElementById('CustomTable').className += ' table-bordered'\n    }, 1)\n  }\n\n  render() {\n    const timeNo = [\n      'a/08',\n      'b/09',\n      'c/10',\n      'd/11',\n      'z/12',\n      'e/13',\n      'f/14',\n      'g/15',\n      'h/16',\n      'i/17',\n      'j/18',\n      'k/19',\n      'l/20',\n      'm/21'\n    ]\n    return (\n      <div>\n        <Table\n          id=\"CustomTable\"\n          bordered\n          responsive\n          size=\"sm\"\n          style={{ background: '#fff', tableLayout: 'fixed' }}\n        >\n          <thead>\n            <tr>\n              <th style={{ width: '60px' }}></th>\n              <th className=\"text-center\">星期一</th>\n              <th className=\"text-center\">星期二</th>\n              <th className=\"text-center\">星期三</th>\n              <th className=\"text-center\">星期四</th>\n              <th className=\"text-center\">星期五</th>\n              {this.props.tableData.sat && (\n                <WeekendTitle className=\"text-center\">\n                  星期六{' '}\n                  <DelBtn\n                    className=\"fa fa-times-circle text-danger\"\n                    aria-hidden=\"true\"\n                    onClick={() => {\n                      !this.props.shared && this.props.onDelSatOrSun('sat')\n                    }}\n                  ></DelBtn>\n                </WeekendTitle>\n              )}\n\n              {this.props.tableData.sun && (\n                <WeekendTitle className=\"text-center\">\n                  星期日{' '}\n                  <DelBtn\n                    className=\"fa fa-times-circle text-danger\"\n                    aria-hidden=\"true\"\n                    onClick={() => {\n                      !this.props.shared && this.props.onDelSatOrSun('sun')\n                    }}\n                  ></DelBtn>\n                </WeekendTitle>\n              )}\n            </tr>\n          </thead>\n          <tbody>\n            {timeNo.map((t, i) => {\n              return (\n                <tr data-time={t} key={i}>\n                  <th className=\"text-center\">{t}</th>\n                  {Object.keys(this.props.tableData.course[t]).map((key, i) => {\n                    const courseData = this.props.tableData.course[t][key]\n                    if (courseData === null) {\n                      return null\n                    }\n\n                    if (!this.props.tableData.sat && key === '5') {\n                      return null\n                    }\n\n                    if (!this.props.tableData.sun && key === '6') {\n                      return null\n                    }\n\n                    return (\n                      <CourseGrid\n                        {...courseData}\n                        key={i}\n                        dayOfWeek={key}\n                        shared={this.props.shared}\n                        onDelCourse={this.props.onDelCourse}\n                        onEditCourse={this.props.onEditCourse}\n                      />\n                    )\n                  })}\n                </tr>\n              )\n            })}\n          </tbody>\n        </Table>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport {\n  Button,\n  ButtonDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem\n} from 'reactstrap'\n\nexport default class ToolBar extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      exportDropdownOpen: false,\n      clearDropdownOpen: false\n    }\n\n    this.toggleExportDropdown = this.toggleExportDropdown.bind(this)\n    this.toggleClearDropdown = this.toggleClearDropdown.bind(this)\n  }\n\n  toggleExportDropdown() {\n    this.setState((prevState) => ({\n      exportDropdownOpen: !prevState.exportDropdownOpen\n    }))\n  }\n\n  toggleClearDropdown() {\n    this.setState((prevState) => ({\n      clearDropdownOpen: !prevState.clearDropdownOpen\n    }))\n  }\n\n  handleExportExcel(e) {\n    document.querySelectorAll('.uniBR').forEach((val) => {\n      val.setAttribute('style', 'mso-data-placement:same-cell')\n    })\n    const html =\n      '<html><head><meta charset=\"utf-8\"></head><body>' +\n      document.getElementById('CustomTable').parentNode.innerHTML +\n      '</body></html>'\n    window.open('data:application/vnd.ms-excel,' + encodeURIComponent(html))\n    e.preventDefault()\n  }\n\n  handleExportPNG() {\n    window.html2canvas(document.querySelectorAll('#CustomTable'), {\n      onrendered: function (canvas) {\n        //\n      }\n    })\n    window.html2canvas(document.querySelectorAll('#CustomTable'), {\n      onrendered: function (canvas) {\n        window.Canvas2Image.saveAsPNG(canvas)\n      }\n    })\n  }\n\n  render() {\n    const btnStyle = { cursor: 'pointer', marginBottom: '5px' }\n    return (\n      <div>\n        <Button\n          color=\"primary\"\n          size=\"sm\"\n          className=\"mr-1\"\n          style={btnStyle}\n          onClick={this.props.onSave}\n        >\n          <i className=\"fa fa-floppy-o\" aria-hidden=\"true\"></i>{' '}\n          <span className=\"d-none d-sm-inline\">儲存</span>\n        </Button>\n        <Button\n          color=\"light\"\n          size=\"sm\"\n          className=\"mr-1\"\n          style={btnStyle}\n          onClick={this.props.onShare}\n        >\n          <i className=\"fa fa-share-square-o\" aria-hidden=\"true\"></i>{' '}\n          <span className=\"d-none d-sm-inline\">分享</span>\n        </Button>\n        <ButtonDropdown\n          className=\"mr-1\"\n          isOpen={this.state.exportDropdownOpen}\n          style={btnStyle}\n          size=\"sm\"\n          toggle={this.toggleExportDropdown}\n        >\n          <DropdownToggle caret color=\"light\">\n            <i className=\"fa fa-download\" aria-hidden=\"true\"></i>{' '}\n            <span className=\"d-none d-sm-inline\">匯出</span>\n          </DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem onClick={this.handleExportExcel}>\n              <i className=\"fa fa-file-excel-o\" aria-hidden=\"true\"></i> .xls\n            </DropdownItem>\n            <DropdownItem onClick={this.handleExportPNG}>\n              <i className=\"fa fa-file-image-o\" aria-hidden=\"true\"></i> .png\n            </DropdownItem>\n          </DropdownMenu>\n        </ButtonDropdown>\n        <span className=\"ml-2 mr-2\"></span>\n        <ButtonDropdown\n          className=\"mr-1\"\n          isOpen={this.state.clearDropdownOpen}\n          style={btnStyle}\n          size=\"sm\"\n          toggle={this.toggleClearDropdown}\n        >\n          <DropdownToggle caret color=\"light\">\n            <i className=\"fa fa-repeat\" aria-hidden=\"true\"></i>{' '}\n            <span className=\"d-none d-sm-inline\">清除</span>\n          </DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem onClick={this.props.onReColor}>\n              <i className=\"fa fa-magic\" aria-hidden=\"true\"></i> 標記\n            </DropdownItem>\n            <DropdownItem onClick={this.props.onReTable}>\n              <i className=\"fa fa-table\" aria-hidden=\"true\"></i> 課表\n            </DropdownItem>\n          </DropdownMenu>\n        </ButtonDropdown>\n        <Button\n          color=\"light\"\n          size=\"sm\"\n          className=\"mr-1\"\n          style={btnStyle}\n          onClick={this.props.onClickCustom}\n        >\n          <i className=\"fa fa-plus\" aria-hidden=\"true\"></i>{' '}\n          <span className=\"d-none d-sm-inline\">自訂時段</span>\n        </Button>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport {\n  Row,\n  Col,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Button,\n  Form,\n  FormGroup,\n  Label,\n  Input\n} from 'reactstrap'\nimport PropTypes from 'prop-types'\nimport cloneDeep from 'lodash.clonedeep'\n\nimport CourseList from './CourseList.jsx'\nimport CourseTable from './CourseTable.jsx'\nimport ToolBar from './ToolBar.jsx'\n\nexport default class CourseTableContainer extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      deptList: {},\n      courseList: {},\n      customTable: {\n        course: {\n          'a/08': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'b/09': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'c/10': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'd/11': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'z/12': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'e/13': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'f/14': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'g/15': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'h/16': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'i/17': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'j/18': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'k/19': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'l/20': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'm/21': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} }\n        },\n        sat: false,\n        sun: false\n      },\n      modalEditCourse: {\n        open: false,\n        modalTitle: '編輯課程',\n        title: '',\n        desc: '',\n        bg: ''\n      },\n      modalCustomCourseOpen: false,\n      filterConflict: false,\n      modalFilterCourseOpen: false,\n      filterCourseForm: {\n        cname: '',\n        teacher: '',\n        time: '',\n        location: ''\n      }\n    }\n    this.timeMap = {\n      a: 'a/08',\n      b: 'b/09',\n      c: 'c/10',\n      d: 'd/11',\n      z: 'z/12',\n      e: 'e/13',\n      f: 'f/14',\n      g: 'g/15',\n      h: 'h/16',\n      i: 'i/17',\n      j: 'j/18',\n      k: 'k/19',\n      l: 'l/20',\n      m: 'm/21'\n    }\n    this.timeOrder = [\n      'a',\n      'b',\n      'c',\n      'd',\n      'z',\n      'e',\n      'f',\n      'g',\n      'h',\n      'i',\n      'j',\n      'k',\n      'l',\n      'm'\n    ]\n    this.db = window.firebase.database()\n    this.getCourseList = this.getCourseList.bind(this)\n    this.getCourseData = this.getCourseData.bind(this)\n    this.changeDept = this.changeDept.bind(this)\n    this.getTableData = this.getTableData.bind(this)\n    this.checkConflict = this.checkConflict.bind(this)\n    this.handleDelSatOrSun = this.handleDelSatOrSun.bind(this)\n    this.handleDelCourse = this.handleDelCourse.bind(this)\n    this.handleOpenEditModal = this.handleOpenEditModal.bind(this)\n    this.toggleModalEditCourse = this.toggleModalEditCourse.bind(this)\n    this.handleEditCourse = this.handleEditCourse.bind(this)\n    this.handleReColor = this.handleReColor.bind(this)\n    this.handleReTable = this.handleReTable.bind(this)\n    this.toggleModalCustomCourse = this.toggleModalCustomCourse.bind(this)\n    this.handleAddCustomCourse = this.handleAddCustomCourse.bind(this)\n    this.handleSave = this.handleSave.bind(this)\n    this.handleShare = this.handleShare.bind(this)\n    this.filterConflict = this.filterConflict.bind(this)\n    this.toggleModalFilterCourse = this.toggleModalFilterCourse.bind(this)\n    this.handleFilterCourse = this.handleFilterCourse.bind(this)\n    this.handleClearFilterCourse = this.handleClearFilterCourse.bind(this)\n    this.handleFilterCourseChange = this.handleFilterCourseChange.bind(this)\n  }\n\n  componentDidMount() {\n    this.getCourseData()\n    this.getTableData()\n  }\n\n  getCourseList(dept = '通識') {\n    const sessionCourseList = window.sessionStorage.courseList\n      ? JSON.parse(window.sessionStorage.courseList)\n      : '{}'\n    /*\n\t\tif (sessionCourseList[dept]) {\n\t\t\t// console.log(`course in ${dept} exist in sessionStorage`);\n\t\t\tthis.setState({\n\t\t\t\tcourseList: Object.assign({}, sessionCourseList[dept])\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\t*/\n\n    // console.log(`Getting course in ${dept}`);\n    this.db\n      .ref(`course/${dept}`)\n      .once('value')\n      .then((snapshot) => {\n        this.setState({\n          courseList: snapshot.val() || {}\n        })\n        window.sessionStorage.courseList = JSON.stringify(\n          Object.assign({}, sessionCourseList, { [dept]: snapshot.val() })\n        )\n      })\n  }\n\n  getCourseData() {\n    // console.log('Getting course data...');\n    if (/* !window.sessionStorage.deptList */ true) {\n      // console.log('Getting deptList from db...')\n      this.db\n        .ref('deptList/')\n        .once('value')\n        .then((snapshot) => {\n          window.sessionStorage.deptList = JSON.stringify(snapshot.val() || {})\n          this.setState({\n            deptList: snapshot.val() || {}\n          })\n        })\n    } else {\n      // console.log('deptList exist in sessionStorage.')\n      this.setState({\n        deptList: Object.assign({}, JSON.parse(window.sessionStorage.deptList))\n      })\n    }\n\n    this.getCourseList()\n  }\n\n  changeDept(dept) {\n    this.getCourseList(dept)\n  }\n\n  getTableData() {\n    const user = this.context.user\n    if (user === null) {\n      setTimeout(this.getTableData, 100)\n      return\n    }\n\n    if (user.uid) {\n      // logged in, get data from db\n      // console.log('Getting custom table data');\n      this.db\n        .ref(`customTable/${user.uuid}`)\n        .once('value')\n        .then((snapshot) => {\n          const tableData = snapshot.val()\n          tableData &&\n            this.setState({\n              customTable: Object.assign({}, JSON.parse(tableData))\n            })\n        })\n    }\n  }\n\n  checkConflict(courseData, shouldAddCourse) {\n    // if !shouldAddCourse => only check course conflict\n    // validate time\n    const time = courseData.time.toLowerCase() // '2bc3g'\n    const sections = this.apartCourseTime(time) // ['abc', '3g']\n    let timeValid = true\n    sections.some((t) => {\n      const valid = this.validateTime(t)\n      if (!valid.valid) {\n        shouldAddCourse && alert(valid.msg)\n        timeValid = false\n        return true\n      }\n\n      return false\n    })\n\n    if (timeValid) {\n      let conflict = false\n      const customTable = cloneDeep(this.state.customTable) // prevent call by reference\n      sections.forEach((t, index) => {\n        if (conflict) {\n          return\n        }\n\n        const time = t // 2ab\n        const dayOfWeek = time[0] // 2\n        const startTime = time[1] // a\n        const rowspan = time.length - 1 // 2\n        if (\n          customTable.course[this.timeMap[startTime]][dayOfWeek - 1] === null ||\n          customTable.course[this.timeMap[startTime]][dayOfWeek - 1].title\n        ) {\n          conflict = true\n          return\n        }\n\n        if (shouldAddCourse) {\n          customTable.course[this.timeMap[startTime]][dayOfWeek - 1] = {\n            // customTable.course['a/08'][1]\n            rowspan: rowspan,\n            title: courseData.cname || courseData.title,\n            desc:\n              courseData.desc || `${courseData.location} ${courseData.teacher}`,\n            bg: courseData.bg || ''\n          }\n        }\n\n        let nextTimeOrder = this.timeOrder.indexOf(startTime) + 1\n        let nextTime = this.timeMap[this.timeOrder[nextTimeOrder]]\n        for (let i = 0; i < rowspan - 1; i++) {\n          const nextTimeCourse = customTable.course[nextTime][dayOfWeek - 1]\n          if (nextTimeCourse === null || nextTimeCourse.title) {\n            conflict = true\n            return\n          }\n\n          shouldAddCourse &&\n            (customTable.course[nextTime][dayOfWeek - 1] = null)\n          nextTimeOrder++\n          nextTime = this.timeMap[this.timeOrder[nextTimeOrder]]\n        }\n\n        if (!shouldAddCourse) return\n\n        if (dayOfWeek === '6' && !customTable.sat) {\n          customTable.sat = true\n        }\n\n        if (dayOfWeek === '7' && !customTable.sun) {\n          customTable.sun = true\n        }\n      })\n\n      if (!!conflict && shouldAddCourse) {\n        alert('!!! 衝堂 !!!')\n        return\n      }\n\n      shouldAddCourse &&\n        this.setState({\n          customTable: cloneDeep(customTable)\n        })\n\n      return conflict\n    }\n\n    return false\n  }\n\n  validateTime(t) {\n    if (/^[1-7]{1}[A-MZa-mz]+$/.test(t)) {\n      let last = -1\n      let err = 0\n      for (let i = 1; i < t.length; i++) {\n        let current = t[i].charCodeAt()\n        if (last !== -1) {\n          if (current === 122) {\n            // z\n            if (last !== 100) {\n              err++\n              break\n            }\n\n            last = current\n            continue\n          }\n\n          if (current === 101) {\n            // e\n            if (last !== 122) {\n              err++\n              break\n            }\n\n            last = current\n            continue\n          }\n\n          if (current !== +last + 1) {\n            err++\n            break\n          }\n        }\n\n        last = current\n      }\n\n      if (err) {\n        return {\n          valid: false,\n          msg: '時段不連續'\n        }\n      } else {\n        return {\n          valid: true\n        }\n      }\n    } else {\n      return {\n        valid: false,\n        msg: '時間格式錯誤'\n      }\n    }\n  }\n\n  apartCourseTime(t) {\n    let result = []\n    if (t === '') {\n      return ['zzzzz']\n    }\n\n    if (t.replace(/[1-7]{1}[A-MZa-mz]+/g, '').length > 0) {\n      result.push(t)\n      return result\n    }\n\n    return t.match(/[1-7]{1}[A-MZa-mz]+/g)\n  }\n\n  handleDelSatOrSun(day) {\n    const customTable = cloneDeep(this.state.customTable)\n    customTable[day] = false\n    const dayOrder = day === 'sat' ? 5 : 6\n    Object.keys(customTable.course).forEach((key, i) => {\n      customTable.course[key][dayOrder] = {}\n    })\n\n    this.setState({\n      customTable: cloneDeep(customTable)\n    })\n  }\n\n  handleDelCourse(time, rowspan, dayOfWeek) {\n    // 'a/08', '2', '0'\n    const customTable = cloneDeep(this.state.customTable)\n    customTable.course[time][dayOfWeek] = {}\n    let nextTimeOrder = this.timeOrder.indexOf(time[0]) + 1\n    let nextTime = this.timeMap[this.timeOrder[nextTimeOrder]]\n    for (let i = 0; i < rowspan - 1; i++) {\n      customTable.course[nextTime][dayOfWeek] = {}\n      nextTimeOrder++\n      nextTime = this.timeMap[this.timeOrder[nextTimeOrder]]\n    }\n\n    this.setState({\n      customTable: cloneDeep(customTable)\n    })\n  }\n\n  handleOpenEditModal(courseData) {\n    const modalEditCourse = cloneDeep(this.state.modalEditCourse)\n    modalEditCourse.open = true\n    modalEditCourse.modalTitle = `編輯 ${courseData.title}`\n    modalEditCourse.title = courseData.title\n    modalEditCourse.desc = courseData.desc\n    modalEditCourse.bg = courseData.bg\n    modalEditCourse.time = courseData.time\n    modalEditCourse.dayOfWeek = courseData.dayOfWeek\n    this.setState({\n      modalEditCourse: cloneDeep(modalEditCourse)\n    })\n  }\n\n  toggleModalEditCourse() {\n    const modalEditCourse = cloneDeep(this.state.modalEditCourse)\n    modalEditCourse.open = !modalEditCourse.open\n    this.setState({\n      modalEditCourse: cloneDeep(modalEditCourse)\n    })\n  }\n\n  handleEditCourse(time, dayOfWeek) {\n    // 'a/08', '0'\n    if (document.getElementById('ModalEditCourse__inputTitle').value === '') {\n      alert('標題不得為空')\n      return\n    }\n\n    const modalEditCourse = cloneDeep(this.state.modalEditCourse)\n    modalEditCourse.open = false\n\n    const customTable = cloneDeep(this.state.customTable)\n    customTable.course[time][dayOfWeek].title = document.getElementById(\n      'ModalEditCourse__inputTitle'\n    ).value\n    customTable.course[time][dayOfWeek].desc = document.getElementById(\n      'ModalEditCourse__inputDesc'\n    ).value\n    customTable.course[time][dayOfWeek].bg = document.getElementById(\n      'ModalEditCourse__inputBg'\n    ).value\n\n    this.setState({\n      modalEditCourse: cloneDeep(modalEditCourse),\n      customTable: cloneDeep(customTable)\n    })\n  }\n\n  handleReColor() {\n    const customTable = cloneDeep(this.state.customTable)\n    Object.keys(customTable.course).forEach((time) => {\n      Object.keys(customTable.course[time]).forEach((dayOrder) => {\n        customTable.course[time][dayOrder] &&\n          (customTable.course[time][dayOrder].bg = '')\n      })\n    })\n\n    this.setState({\n      customTable: cloneDeep(customTable)\n    })\n  }\n\n  handleReTable() {\n    const customTable = cloneDeep(this.state.customTable)\n    Object.keys(customTable.course).forEach((time) => {\n      Object.keys(customTable.course[time]).forEach((dayOrder) => {\n        customTable.course[time][dayOrder] = {}\n      })\n    })\n\n    customTable.sat = false\n    customTable.sun = false\n    this.setState({\n      customTable: cloneDeep(customTable)\n    })\n  }\n\n  toggleModalCustomCourse() {\n    this.setState((prevState) => ({\n      modalCustomCourseOpen: !prevState.modalCustomCourseOpen\n    }))\n  }\n\n  handleAddCustomCourse() {\n    const time = document.getElementById('ModalCustomCourse__inputTime').value\n    const title = document.getElementById('ModalCustomCourse__inputTitle').value\n    if (!time || !title) {\n      alert('時間、標題不得為空')\n      return\n    }\n\n    this.checkConflict(\n      {\n        time,\n        title,\n        desc:\n          document.getElementById('ModalCustomCourse__inputDesc').value || ' ',\n        bg: document.getElementById('ModalCustomCourse__inputBg').value\n      },\n      true\n    )\n\n    this.toggleModalCustomCourse()\n  }\n\n  handleSave() {\n    this.db\n      .ref(`customTable/${this.context.user.uuid}`)\n      .set(JSON.stringify(this.state.customTable))\n      .then(() => {\n        alert('儲存成功!')\n      })\n  }\n\n  handleShare() {\n    const uuid = this.context.user.uuid\n    const hash = (Date.now() * Math.random() * Math.random())\n      .toString(16)\n      .replace('.', '')\n      .substring(2, 6)\n    this.db\n      .ref(`sharedTable/${uuid}`)\n      .set(JSON.stringify({ [hash]: this.state.customTable }))\n      .then(() => {\n        prompt(\n          '已將當前課表分享於以下連結',\n          `${process.env.REACT_APP_BASE_URL}/#/share/${uuid}${hash}`\n        )\n      })\n  }\n\n  filterConflict() {\n    this.setState((prevState) => ({\n      filterConflict: !prevState.filterConflict\n    }))\n  }\n\n  toggleModalFilterCourse() {\n    this.setState((prevState) => ({\n      modalFilterCourseOpen: !prevState.modalFilterCourseOpen\n    }))\n  }\n\n  handleFilterCourseChange(event, field) {\n    const value = event.target.value\n    this.setState((prevState) => ({\n      filterCourseForm: Object.assign({}, prevState.filterCourseForm, {\n        [field]: value\n      })\n    }))\n  }\n\n  handleFilterCourse() {\n    this.setState(() => ({\n      modalFilterCourseOpen: false\n    }))\n  }\n\n  handleClearFilterCourse() {\n    this.setState(() => ({\n      filterCourseForm: {\n        cname: '',\n        teacher: '',\n        time: '',\n        location: ''\n      },\n      modalFilterCourseOpen: false\n    }))\n  }\n\n  render() {\n    let courseList = cloneDeep(this.state.courseList)\n    let isFilterCourse = false\n    const parsedCourseList = []\n    const filterCourseForm = this.state.filterCourseForm\n\n    Object.keys(courseList).reduce((result, courseKey) => {\n      courseList[courseKey].isConflict = this.checkConflict(\n        courseList[courseKey],\n        false\n      )\n\n      const match = Object.keys(filterCourseForm).every((field) => {\n        if (filterCourseForm[field] === '') {\n          return true\n        }\n\n        isFilterCourse = true\n        if (\n          courseList[courseKey][field]\n            .toUpperCase()\n            .includes(filterCourseForm[field].toUpperCase())\n        ) {\n          return true\n        }\n\n        return false\n      })\n\n      if (match) {\n        parsedCourseList.push(courseList[courseKey])\n      }\n\n      return parsedCourseList\n    }, [])\n\n    return (\n      <div\n        style={{\n          background: '#fff',\n          padding: '20px 5px',\n          boxShadow: '0 0 10px 0 #080808'\n        }}\n      >\n        <Row className=\"mb-2\">\n          <Col xs=\"12\">\n            {this.context.user && this.context.user.uid && (\n              <ToolBar\n                onSave={this.handleSave}\n                onShare={this.handleShare}\n                onReColor={this.handleReColor}\n                onReTable={this.handleReTable}\n                onClickCustom={this.toggleModalCustomCourse}\n              />\n            )}\n          </Col>\n        </Row>\n        <Row className=\"mb-2\">\n          <Col xs=\"12\">\n            <CourseTable\n              tableData={this.state.customTable}\n              onDelSatOrSun={this.handleDelSatOrSun}\n              onDelCourse={this.handleDelCourse}\n              onEditCourse={this.handleOpenEditModal}\n            />\n            <hr />\n          </Col>\n        </Row>\n        <Row>\n          <Col xs=\"12\">\n            <CourseList\n              deptList={this.state.deptList}\n              courseList={parsedCourseList}\n              onChangeDept={this.changeDept}\n              onAddCourse={this.checkConflict}\n              filterConflict={this.state.filterConflict}\n              onFilterConflict={this.filterConflict}\n              filterCourse={isFilterCourse}\n              onFilterCourse={this.toggleModalFilterCourse}\n            />\n          </Col>\n        </Row>\n        <Modal\n          id=\"ModalEditCourse\"\n          isOpen={this.state.modalEditCourse.open}\n          toggle={this.toggleModalEditCourse}\n        >\n          <ModalHeader\n            id=\"ModalEditCourse__title\"\n            toggle={this.toggleModalEditCourse}\n          >\n            {this.state.modalEditCourse.modalTitle}\n          </ModalHeader>\n          <ModalBody>\n            <Form>\n              <FormGroup row>\n                <Label for=\"ModalEditCourse__inputTitle\" sm={2}>\n                  標題\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalEditCourse__inputTitle\"\n                    defaultValue={this.state.modalEditCourse.title}\n                    placeholder=\"課程名稱\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalEditCourse__inputDesc\" sm={2}>\n                  內容\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalEditCourse__inputDesc\"\n                    defaultValue={this.state.modalEditCourse.desc}\n                    placeholder=\"教師、地點\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalEditCourse__inputBg\" sm={2}>\n                  標記\n                </Label>\n                <Col sm={10}>\n                  <input\n                    id=\"ModalEditCourse__inputBg\"\n                    type=\"color\"\n                    defaultValue={this.state.modalEditCourse.bg || '#ffffff'}\n                    style={{ verticalAlign: 'sub', width: '100%' }}\n                  />\n                </Col>\n              </FormGroup>\n            </Form>\n          </ModalBody>\n          <ModalFooter>\n            <Button\n              color=\"primary\"\n              onClick={() => {\n                this.handleEditCourse(\n                  this.state.modalEditCourse.time,\n                  this.state.modalEditCourse.dayOfWeek\n                )\n              }}\n            >\n              確定\n            </Button>\n          </ModalFooter>\n        </Modal>\n        <Modal\n          id=\"ModalCustomCourse\"\n          isOpen={this.state.modalCustomCourseOpen}\n          toggle={this.toggleModalCustomCourse}\n        >\n          <ModalHeader toggle={this.toggleModalCustomCourse}>\n            自訂時段\n          </ModalHeader>\n          <ModalBody>\n            <Form>\n              <FormGroup row>\n                <Label for=\"ModalCustomCourse__inputTime\" sm={2}>\n                  時間\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalCustomCourse__inputTime\"\n                    placeholder=\"2bcd4jk\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalCustomCourse__inputTitle\" sm={2}>\n                  標題\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalCustomCourse__inputTitle\"\n                    placeholder=\"meeting\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalCustomCourse__inputDesc\" sm={2}>\n                  內容\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalCustomCourse__inputDesc\"\n                    placeholder=\"R438 with YCC\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalCustomCourse__inputBg\" sm={2}>\n                  標記\n                </Label>\n                <Col sm={10}>\n                  <input\n                    id=\"ModalCustomCourse__inputBg\"\n                    type=\"color\"\n                    defaultValue=\"#ffffff\"\n                    style={{ verticalAlign: 'sub', width: '100%' }}\n                  />\n                </Col>\n              </FormGroup>\n            </Form>\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"primary\" onClick={this.handleAddCustomCourse}>\n              確定\n            </Button>\n          </ModalFooter>\n        </Modal>\n        <Modal\n          id=\"ModalFilterCourse\"\n          isOpen={this.state.modalFilterCourseOpen}\n          toggle={this.toggleModalFilterCourse}\n        >\n          <ModalHeader\n            id=\"ModalFilterCourse__title\"\n            toggle={this.toggleModalFilterCourse}\n          >\n            篩選課程\n          </ModalHeader>\n          <ModalBody>\n            <Form>\n              <FormGroup row>\n                <Label for=\"ModalFilterCourse__inputCname\" sm={2}>\n                  課名\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalFilterCourse__inputCname\"\n                    value={this.state.filterCourseForm.cname}\n                    onChange={(e) => {\n                      this.handleFilterCourseChange(e, 'cname')\n                    }}\n                    placeholder=\"課程名稱\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalFilterCourse__inputTeacher\" sm={2}>\n                  教師\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalFilterCourse__inputTeacher\"\n                    value={this.state.filterCourseForm.teacher}\n                    onChange={(e) => {\n                      this.handleFilterCourseChange(e, 'teacher')\n                    }}\n                    placeholder=\"授課教師\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalFilterCourse__inputTime\" sm={2}>\n                  時間\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalFilterCourse__inputTime\"\n                    value={this.state.filterCourseForm.time}\n                    onChange={(e) => {\n                      this.handleFilterCourseChange(e, 'time')\n                    }}\n                    placeholder=\"1bcd\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalFilterCourse__inputLocation\" sm={2}>\n                  教室\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalFilterCourse__inputLocation\"\n                    value={this.state.filterCourseForm.location}\n                    onChange={(e) => {\n                      this.handleFilterCourseChange(e, 'location')\n                    }}\n                    placeholder=\"管268\"\n                  />\n                </Col>\n              </FormGroup>\n            </Form>\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"primary\" onClick={this.handleFilterCourse}>\n              篩選\n            </Button>\n            <Button color=\"danger\" onClick={this.handleClearFilterCourse}>\n              取消篩選\n            </Button>\n          </ModalFooter>\n        </Modal>\n      </div>\n    )\n  }\n}\n\nCourseTableContainer.contextTypes = {\n  user: PropTypes.object\n}\n","import React from 'react'\n\nimport App from './App.jsx'\nimport CourseTableContainer from './CourseTableContainer.jsx'\n\nexport default class Home extends React.Component {\n  render() {\n    return (\n      <App>\n        <CourseTableContainer />\n      </App>\n    )\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Row, Col, Alert } from 'reactstrap'\nimport styled from 'styled-components'\n\nimport App from './App.jsx'\nimport CourseTable from './CourseTable.jsx'\n\nconst ShareContainer = styled.div`\n  background: #fff;\n  padding: 20px 5px;\n  box-shadow: 0 0 10px 0 #080808;\n  margin-top: 55px;\n  margin-bottom: 55px;\n`\n\nexport default class Share extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      customTable: 'Loading...'\n    }\n\n    this.db = window.firebase.database()\n  }\n\n  componentDidMount() {\n    const routeHash = this.context.router.route.match.params.hash\n    const uuid = routeHash.substring(0, routeHash.length - 4)\n    const hash = routeHash.substring(routeHash.length - 4, routeHash.length)\n    this.db\n      .ref(`sharedTable/${uuid}`)\n      .once('value')\n      .then((snapshot) => {\n        const data = snapshot.val()\n        if (data === null) {\n          this.setState({\n            customTable: '連結無效'\n          })\n          return\n        }\n\n        const tableData = JSON.parse(data)[hash]\n        if (!tableData) {\n          this.setState({\n            customTable: '連結無效'\n          })\n          return\n        }\n\n        this.setState({\n          customTable: tableData\n        })\n      })\n  }\n\n  render() {\n    return (\n      <App>\n        <ShareContainer>\n          <Row>\n            <Col xs=\"12\">\n              {typeof this.state.customTable === 'string' && (\n                <Alert className=\"text-center\" color=\"warning\">\n                  {this.state.customTable}\n                </Alert>\n              )}\n\n              {typeof this.state.customTable !== 'string' && (\n                <CourseTable tableData={this.state.customTable} shared />\n              )}\n            </Col>\n          </Row>\n        </ShareContainer>\n      </App>\n    )\n  }\n}\n\nShare.contextTypes = {\n  router: PropTypes.object\n}\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (!isLocalhost) {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl)\n      } else {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.')\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n            }\n          }\n        }\n      }\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { HashRouter as Router, Route, Redirect, Switch } from 'react-router-dom'\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nimport Home from './Home.jsx'\n// import Exchange from './Exchange.jsx'\nimport Share from './Share.jsx'\n// import CourseReview from './CourseReview.jsx'\n\nimport registerServiceWorker from './registerServiceWorker'\n\n// Initialize Firebase\nconst config = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID\n}\nwindow.firebase.initializeApp(config)\n\nReactDOM.render(\n  <Router>\n    <Switch>\n      <Route exact path=\"/\" component={Home} />\n      {/* <Route path=\"/exchange\" component={Exchange} /> */}\n      <Route exact path=\"/share/:hash\" component={Share} />\n      {/* <Route path=\"/review\" component={CourseReview} /> */}\n      <Redirect from=\"*\" to=\"/\" />\n    </Switch>\n  </Router>,\n  document.getElementById('app')\n)\nregisterServiceWorker()\n"],"sourceRoot":""}