{"version":3,"sources":["Navigation.jsx","App.jsx","Loading.jsx","CourseList.jsx","CourseGrid.jsx","CourseTable.jsx","ToolBar.jsx","CourseTableContainer.jsx","Home.jsx","ExchangeSetting.jsx","ExchangeItem.jsx","ExchangeList.jsx","ExchangeListContainer.jsx","Exchange.jsx","Share.jsx","CourseReviewFilter.jsx","CourseReviewList.jsx","CourseReviewContainer.jsx","CourseReview.jsx","registerServiceWorker.js","index.js"],"names":["NavigationBar","styled","Navbar","Hide850","span","UserImg","img","UserName","Navigation","props","toggleNavbar","bind","toggleLoginTooltip","toggleLogoutTooltip","state","navbarIsOpen","loginTooltip","logoutTooltip","this","setState","prevState","provider","window","firebase","auth","FacebookAuthProvider","addScope","signInWithPopup","then","user","additionalUserInfo","uuid","uid","userProfile","profile","userLink","link","userPicture","picture","data","url","Promise","allSettled","database","ref","set","location","reload","catch","error","errorCode","code","errorMessage","message","console","signOut","route","context","router","loginStatusInit","isLogin","color","dark","expand","href","process","src","alt","height","onClick","isOpen","navbar","className","match","path","to","aria-hidden","target","rel","fbLink","fbPicture","displayName","id","handleLogout","delay","show","hide","placement","toggle","handleLogin","React","Component","contextTypes","PropTypes","object","RelativeContainer","Container","App","db","onAuthStateChanged","all","once","snapshot","val","ReactAlert","warning","position","effect","beep","timeout","Object","assign","providerData","children","html","childContextTypes","LoadingWrapper","div","marginTop","Loading","loading","width","PureComponent","CommonRow","TableHeader","TableRow","DeptSelector","selected","handleSelect","e","value","onChangeDept","onChange","keys","deptList","map","i","key","filterCourse","size","onFilterCourse","filterConflict","onFilterConflict","CourseList","list","courseList","style","overflow","maxHeight","background","length","Fragment","isConflict","data-uuid","cid","cname","classes","time","teacher","grade","year","disabled","onAddCourse","EditBtnContainer","DelBtn","EditBtn","Grid","td","bg","hex","result","exec","r","parseInt","g","b","_hexToRgb","Math","sqrt","CourseGrid","mouseEnter","handleMouseEnter","handleMouseLeave","handleDel","handleEdit","shared","parentNode","getAttribute","rowspan","onDelCourse","dayOfWeek","onEditCourse","title","desc","rowSpan","onMouseEnter","onMouseLeave","WeekendTitle","th","CourseTable","classArr","document","getElementById","replace","trim","split","join","setTimeout","bordered","responsive","tableLayout","tableData","sat","onDelSatOrSun","sun","t","data-time","course","courseData","ToolBar","exportDropdownOpen","clearDropdownOpen","toggleExportDropdown","toggleClearDropdown","querySelectorAll","forEach","setAttribute","innerHTML","open","encodeURIComponent","preventDefault","html2canvas","onrendered","canvas","Canvas2Image","saveAsPNG","btnStyle","cursor","marginBottom","onSave","onShare","caret","handleExportExcel","handleExportPNG","onReColor","onReTable","onClickCustom","CourseTableContainer","customTable","0","1","2","3","4","5","6","modalEditCourse","modalTitle","modalCustomCourseOpen","modalFilterCourseOpen","filterCourseForm","timeMap","a","c","d","z","f","h","j","k","l","m","timeOrder","getCourseList","getCourseData","changeDept","getTableData","checkConflict","handleDelSatOrSun","handleDelCourse","handleOpenEditModal","toggleModalEditCourse","handleEditCourse","handleReColor","handleReTable","toggleModalCustomCourse","handleAddCustomCourse","handleSave","handleShare","toggleModalFilterCourse","handleFilterCourse","handleClearFilterCourse","handleFilterCourseChange","dept","sessionCourseList","sessionStorage","JSON","parse","stringify","shouldAddCourse","toLowerCase","sections","apartCourseTime","timeValid","some","valid","validateTime","alert","msg","conflict","cloneDeep","index","startTime","nextTimeOrder","indexOf","nextTime","nextTimeCourse","test","last","err","current","charCodeAt","push","day","dayOrder","hash","Date","now","random","toString","substring","prompt","event","field","isFilterCourse","parsedCourseList","reduce","courseKey","every","toUpperCase","includes","padding","boxShadow","xs","row","for","sm","type","defaultValue","placeholder","verticalAlign","Home","SettingContainer","top","Toggle","ExchangeSetting","wantTags","haveTags","filterTags","published","settingOpen","handleChangeWant","handleChangeHave","handleChangeDesc","handleChangeFilter","handleFilter","handleToggleSetting","setSettingsFromProps","nextProps","exchangeSetting","exchangeList","want","have","clear","keywords","onFilter","offsetHeight","body","onlyUnique","rows","onUnpublish","outline","Card","Profile","Username","Timestamp","Desc","CourseTitle","h6","Course","ExchangeItem","item","name","lg","moment","utcOffset","format","wnatCourse","pill","haveCourse","ExchangeList","transition","ExchangeListContainer","filter","handleSaveExchangeSetting","handleUnpublish","parseList","getExchangeList","fbid","remove","cloenDeep","filterArr","values","shuffle","testString","keyword","array","temporaryValue","randomIndex","currentIndex","floor","onToggleSetting","Exchange","ShareContainer","Share","routeHash","params","CourseReviewFilter","sortType","onChangeSortType","ReviewCard","Title","Content","LikeBtn","like","css","DisLikeBtn","dislike","ReviewItem","currentUserLike","username","currentUserPost","onDel","content","display","onLike","CourseReviewList","reviewListBricks","destroy","Bricklayer","querySelector","reviewList","ThePen","ReviewListContainer","Row","CourseReviewContainer","addReviewModalOpen","reviewData","likeData","toggleAddReviewModal","handleAddReview","getReviewList","parseReviewList","handleChangeSortType","handleDelReview","handleLike","likedCount","likeObj","reviewKey","reviewObj","undefined","sort","compareByTime","compareByLike","isBefore","randomKey","confirm","btnType","block","CourseReview","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","ReactDOM","render","exact","component","from","URL","origin","addEventListener","fetch","response","status","headers","get","ready","unregister","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.5e7555d0.chunk.js","sourcesContent":["import React from 'react'\nimport {\n  Collapse,\n  Navbar,\n  NavbarToggler,\n  NavbarBrand,\n  Nav,\n  NavItem,\n  NavLink,\n  Tooltip\n} from 'reactstrap'\nimport { Link } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nconst NavigationBar = styled(Navbar)`\n  z-index: 5;\n  padding: 0.3rem 1rem;\n`\n\nconst Hide850 = styled.span`\n  @media (max-width: 850px) and (min-width: 576px) {\n    display: none;\n  }\n`\n\nconst UserImg = styled.img`\n  border-radius: 50px;\n`\n\nconst UserName = styled.span`\n  @media (max-width: 1000px) and (min-width: 576px) {\n    display: none;\n  }\n`\n\nexport default class Navigation extends React.Component {\n  constructor(props) {\n    super(props)\n    this.toggleNavbar = this.toggleNavbar.bind(this)\n    this.toggleLoginTooltip = this.toggleLoginTooltip.bind(this)\n    this.toggleLogoutTooltip = this.toggleLogoutTooltip.bind(this)\n    this.state = {\n      navbarIsOpen: false,\n      loginTooltip: false,\n      logoutTooltip: false\n    }\n  }\n\n  toggleNavbar() {\n    this.setState((prevState) => ({\n      navbarIsOpen: !prevState.navbarIsOpen\n    }))\n  }\n\n  toggleLoginTooltip() {\n    this.setState((prevState) => ({\n      loginTooltip: !prevState.loginTooltip\n    }))\n  }\n\n  toggleLogoutTooltip() {\n    this.setState((prevState) => ({\n      logoutTooltip: !prevState.logoutTooltip\n    }))\n  }\n\n  handleLogin() {\n    const provider = new window.firebase.auth.FacebookAuthProvider()\n    provider.addScope('user_link')\n    window.firebase\n      .auth()\n      .signInWithPopup(provider)\n      .then(function ({ user, additionalUserInfo }) {\n        const uuid = user.uid\n        const userProfile = additionalUserInfo.profile\n        const userLink = userProfile.link || ''\n        const userPicture = userProfile.picture.data.url\n\n        return Promise.allSettled([\n          window.firebase.database().ref(`/userLink/${uuid}`).set(userLink),\n          window.firebase\n            .database()\n            .ref(`/userPicture/${uuid}`)\n            .set(userPicture)\n        ])\n      })\n      .then(() => {\n        window.location.reload()\n      })\n      .catch(function (error) {\n        const errorCode = error.code\n        const errorMessage = error.message\n        console.error(`[${errorCode}] ${errorMessage}`)\n      })\n  }\n\n  handleLogout() {\n    window.firebase\n      .auth()\n      .signOut()\n      .then(function () {\n        window.location.reload()\n      })\n      .catch(function (error) {\n        console.error(error)\n      })\n  }\n\n  render() {\n    const route = this.context.router.route\n    const user = this.context.user\n    const loginStatusInit = !!user\n    const isLogin = loginStatusInit && !!user.uid\n    return (\n      <NavigationBar color=\"dark\" dark expand=\"sm\">\n        <NavbarBrand href={process.env.REACT_APP_BASE_URL}>\n          <img\n            src={`${process.env.REACT_APP_BASE_URL}/logo.png`}\n            alt=\"\"\n            height=\"31px\"\n          />{' '}\n          自己的課表自己排 2.0\n        </NavbarBrand>\n        <NavbarToggler onClick={this.toggleNavbar} />\n        <Collapse isOpen={this.state.navbarIsOpen} navbar>\n          <Nav navbar>\n            <NavItem>\n              <Link\n                className={\n                  route.match.path === '/' ? 'active nav-link' : ' nav-link'\n                }\n                to=\"/\"\n              >\n                <i className=\"fa fa-table\" aria-hidden=\"true\"></i>{' '}\n                <span className=\"d-sm-none d-md-inline\">\n                  <Hide850>我的</Hide850>課表\n                </span>\n              </Link>\n            </NavItem>\n            <NavItem>\n              <Link\n                className={\n                  route.match.path === '/exchange'\n                    ? 'active nav-link'\n                    : ' nav-link'\n                }\n                to=\"/exchange\"\n              >\n                <i className=\"fa fa-exchange\" aria-hidden=\"true\"></i>{' '}\n                <span className=\"d-sm-none d-md-inline\">\n                  換課<Hide850>平台</Hide850>\n                </span>\n              </Link>\n            </NavItem>\n            <NavItem>\n              <Link\n                className={\n                  route.match.path === '/review'\n                    ? 'active nav-link'\n                    : ' nav-link'\n                }\n                to=\"/review\"\n              >\n                <i className=\"fa fa-thumbs-up\" aria-hidden=\"true\"></i>{' '}\n                <span className=\"d-sm-none d-md-inline\">\n                  <Hide850>課程</Hide850>評價\n                </span>\n              </Link>\n            </NavItem>\n            <NavItem>\n              <NavLink\n                href=\"https://fb.com/MOLi.rocks/posts/2104134533131853\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <span>\n                  <i className=\"fa fa-question-circle\" aria-hidden=\"true\"></i>{' '}\n                  <span className=\"d-sm-none d-md-inline\">選課教學</span>\n                </span>\n              </NavLink>\n            </NavItem>\n            <NavItem>\n              <NavLink\n                href=\"https://github.com/x3388638/KeBiau/issues\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <span>\n                  <i\n                    className=\"fa fa-exclamation-circle\"\n                    aria-hidden=\"true\"\n                  ></i>{' '}\n                  <span className=\"d-sm-none d-md-inline\">回報</span>\n                </span>\n              </NavLink>\n            </NavItem>\n          </Nav>\n          <Nav className=\"ml-auto\" navbar>\n            {loginStatusInit && isLogin && (\n              <NavItem>\n                <NavLink\n                  href={user.fbLink || `https://fb.com/${user.uid}`}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  <UserImg src={user.fbPicture} alt=\"\" height=\"21\" />\n                  <UserName className=\"ml-2\">{user.displayName}</UserName>\n                </NavLink>\n              </NavItem>\n            )}\n            {loginStatusInit && (\n              <NavItem>\n                {isLogin ? (\n                  <NavLink id=\"LogoutBtn\" href=\"#\" onClick={this.handleLogout}>\n                    <i className=\"fa fa-sign-out\" aria-hidden=\"true\"></i>{' '}\n                    <span className=\"d-inline d-sm-none\">登出</span>\n                    <Tooltip\n                      delay={{ show: 0, hide: 0 }}\n                      placement=\"left\"\n                      isOpen={this.state.logoutTooltip}\n                      target=\"LogoutBtn\"\n                      toggle={this.toggleLogoutTooltip}\n                    >\n                      登出\n                    </Tooltip>\n                  </NavLink>\n                ) : (\n                  <NavLink id=\"LoginBtn\" href=\"#\" onClick={this.handleLogin}>\n                    <i className=\"fa fa-facebook-square\" aria-hidden=\"true\"></i>\n                    <Tooltip\n                      delay={{ show: 0, hide: 0 }}\n                      placement=\"left\"\n                      isOpen={this.state.loginTooltip}\n                      target=\"LoginBtn\"\n                      toggle={this.toggleLoginTooltip}\n                    >\n                      登入 Facebook\n                    </Tooltip>\n                  </NavLink>\n                )}\n              </NavItem>\n            )}\n          </Nav>\n        </Collapse>\n      </NavigationBar>\n    )\n  }\n}\n\nNavigation.contextTypes = {\n  user: PropTypes.object,\n  router: PropTypes.object\n}\n","import React from 'react'\nimport { Container } from 'reactstrap'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport ReactAlert from 'react-s-alert'\n\nimport 'react-s-alert/dist/s-alert-default.css'\nimport 'react-s-alert/dist/s-alert-css-effects/genie.css'\n\nimport Navigation from './Navigation.jsx'\n\nimport './App.css'\n\nconst RelativeContainer = styled(Container)`\n  position: relative;\n`\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      user: null\n    }\n\n    this.db = window.firebase.database()\n    window.firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        Promise.all([\n          this.db\n            .ref(`/userLink/${user.uid}`)\n            .once('value')\n            .then((snapshot) => snapshot.val()),\n          this.db\n            .ref(`/userPicture/${user.uid}`)\n            .once('value')\n            .then((snapshot) => snapshot.val())\n        ])\n          .then(([userLink, userPicture]) => {\n            if (!userLink || !userPicture) {\n              // no userLink or userPicture in DB\n              ReactAlert.warning(\n                '請重新登入 FB 並允許「動態時報連結」權限存取，以獲得最佳的使用者體驗',\n                {\n                  position: 'bottom-right',\n                  effect: 'genie',\n                  beep: false,\n                  timeout: 'none'\n                }\n              )\n            }\n\n            this.setState({\n              user: Object.assign({}, user.providerData[0], {\n                uuid: user.uid,\n                fbLink: userLink || '',\n                fbPicture: userPicture || ''\n              })\n            })\n          })\n          .catch(console.error)\n      } else {\n        this.setState({\n          user: {\n            uid: null\n          }\n        })\n      }\n    })\n  }\n\n  getChildContext() {\n    return {\n      user: this.state.user\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <Navigation />\n        <RelativeContainer>{this.props.children}</RelativeContainer>\n        <ReactAlert html />\n      </div>\n    )\n  }\n}\n\nApp.childContextTypes = {\n  user: PropTypes.object\n}\n","import React from 'react'\nimport { BarLoader } from 'react-spinners'\nimport styled from 'styled-components'\n\nconst LoadingWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: ${(props) => `${props.marginTop || 20}px`};\n`\n\nexport default class Loading extends React.PureComponent {\n  render() {\n    return (\n      <LoadingWrapper {...this.props}>\n        <BarLoader color=\"#666\" loading height={5} width={200} />\n      </LoadingWrapper>\n    )\n  }\n}\n","import React from 'react'\nimport { Button } from 'reactstrap'\nimport styled from 'styled-components'\nimport Loading from './Loading'\n\nconst CommonRow = styled.div`\n  display: grid;\n  grid-template-columns: 2fr 3fr 1fr 1fr 2fr 3fr 1fr 1fr 1fr;\n  grid-gap: 2px;\n  margin: 5px;\n`\n\nconst TableHeader = styled(CommonRow)`\n  margin: 0 5px 5px;\n  position: sticky;\n  top: 0;\n  left: 0;\n  background: #fff;\n  z-index: 10;\n  border-bottom: 1px solid #adadad;\n  & span {\n    padding: 10px 0px;\n    font-weight: bold;\n  }\n\n  @media screen and (max-width: 992px) {\n    display: none;\n  }\n`\n\nconst TableRow = styled(CommonRow)`\n  background: #f9f9f9;\n  border-radius: 2px;\n  & span {\n    display: flex;\n    align-items: center;\n    padding: 5px;\n    &.TableRow__link,\n    &.TableRow__btn {\n      justify-content: center;\n    }\n  }\n\n  @media screen and (max-width: 991px) {\n    padding: 5px;\n    box-shadow: 1px 1px 2px 0px #878787;\n    margin-bottom: 10px;\n    grid-template-columns: 1fr 3fr 1fr;\n    grid-template-rows: 1fr 1fr 1fr 1fr;\n    grid-template-areas:\n      'cid cname classes'\n      'teacher teacher teacher'\n      'time time time'\n      'location location location'\n      'link link btn';\n    & span {\n      padding: 0 8px;\n    }\n\n    & span.TableRow__cid {\n      grid-area: cid;\n    }\n    & span.TableRow__cname {\n      grid-area: cname;\n      justify-content: center;\n      font-weight: bold;\n    }\n    & span.TableRow__classes {\n      grid-area: classes;\n      justify-content: flex-end;\n      &::after {\n        content: '班';\n        padding-left: 2px;\n      }\n    }\n    & span.TableRow__time {\n      grid-area: time;\n      &::before {\n        content: '時間:';\n        padding-right: 2px;\n      }\n    }\n    & span.TableRow__location {\n      grid-area: location;\n      &::before {\n        content: '地點:';\n        padding-right: 2px;\n      }\n    }\n    & span.TableRow__teacher {\n      grid-area: teacher;\n      &::before {\n        content: '教師:';\n        padding-right: 2px;\n      }\n    }\n    & span.TableRow__grade {\n      display: none;\n    }\n    & span.TableRow__link {\n      grid-area: link;\n      justify-content: flex-end;\n    }\n    & span.TableRow__btn {\n      grid-area: btn;\n      & button {\n        width: 100%;\n      }\n    }\n  }\n`\n\nclass DeptSelector extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      selected: ''\n    }\n\n    this.handleSelect = this.handleSelect.bind(this)\n  }\n\n  componentDidMount() {\n    this.setState({\n      selected: '通識'\n    })\n  }\n\n  handleSelect(e) {\n    this.setState({\n      selected: e.target.value\n    })\n\n    this.props.onChangeDept(e.target.value)\n  }\n\n  render() {\n    return (\n      <div className=\"mb-2\">\n        <strong>開課單位：</strong>\n        <select value={this.state.selected} onChange={this.handleSelect}>\n          {Object.keys(this.props.deptList).map((val, i) => {\n            return (\n              <option key={i} value={val}>\n                {val}\n              </option>\n            )\n          })}\n        </select>{' '}\n        <Button\n          className={this.props.filterCourse ? 'active' : ''}\n          color={this.props.filterCourse ? 'danger' : 'light'}\n          size=\"sm\"\n          onClick={this.props.onFilterCourse}\n        >\n          篩選課程\n        </Button>{' '}\n        <Button\n          className={this.props.filterConflict ? 'active' : ''}\n          color={this.props.filterConflict ? 'danger' : 'light'}\n          size=\"sm\"\n          onClick={this.props.onFilterConflict}\n        >\n          {this.props.filterConflict ? '取消過濾' : '過濾衝堂'}\n        </Button>\n        <a\n          className=\"float-right mr-2 text-warning\"\n          href=\"https://ccweb.ncnu.edu.tw/student/DeptQuerylist.php\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <i className=\"fa fa-sitemap\" aria-hidden=\"true\"></i> 各系所課程地圖\n        </a>\n      </div>\n    )\n  }\n}\n\nexport default class CourseList extends React.Component {\n  render() {\n    const list = this.props.courseList\n    return (\n      <div>\n        <DeptSelector {...this.props} />\n        <div\n          style={{\n            overflow: 'auto',\n            maxHeight: '487px',\n            background: '#fff',\n            width: '100%'\n          }}\n        >\n          {!list.length && <Loading />}\n\n          {!!list.length && (\n            <React.Fragment>\n              <TableHeader>\n                <span>課號</span>\n                <span>課程名稱</span>\n                <span>班別</span>\n                <span>時段</span>\n                <span>授課地點</span>\n                <span>教師</span>\n                <span>年級</span>\n                <span></span>\n                <span></span>\n              </TableHeader>\n              {Object.keys(list).map((val) =>\n                this.props.filterConflict && list[val].isConflict ? null : (\n                  <TableRow key={val} data-uuid={val}>\n                    <span className=\"TableRow__cid\">{list[val].cid}</span>\n                    <span className=\"TableRow__cname\">{list[val].cname}</span>\n                    <span className=\"TableRow__classes\">\n                      {list[val].classes}\n                    </span>\n                    <span className=\"TableRow__time\">{list[val].time}</span>\n                    <span className=\"TableRow__location\">\n                      {list[val].location}\n                    </span>\n                    <span className=\"TableRow__teacher\">\n                      {list[val].teacher}\n                    </span>\n                    <span className=\"TableRow__grade\">{list[val].grade}</span>\n                    <span className=\"TableRow__link\">\n                      <a\n                        href={`https://ccweb.ncnu.edu.tw/student/aspmaker_course_opened_detail_viewview.php?showdetail=&year=${list[val].year}&courseid=${list[val].cid}&_class=${list[val].classes}&modal=0`}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        課綱{' '}\n                        <i\n                          className=\"fa fa-external-link\"\n                          aria-hidden=\"true\"\n                        ></i>\n                      </a>\n                    </span>\n                    <span className=\"TableRow__btn\">\n                      <Button\n                        color=\"success\"\n                        size=\"sm\"\n                        disabled={list[val].isConflict ? true : false}\n                        onClick={() => {\n                          this.props.onAddCourse(list[val], true)\n                        }}\n                      >\n                        {list[val].isConflict ? '衝堂' : '加入'}\n                      </Button>\n                    </span>\n                  </TableRow>\n                )\n              )}\n            </React.Fragment>\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst EditBtnContainer = styled.span`\n  top: -8px;\n  position: relative;\n`\n\nconst DelBtn = styled.span`\n  display: none;\n  cursor: pointer;\n  color: #c9302c !important;\n  font-size: 20px;\n`\n\nconst EditBtn = styled.i`\n  display: none;\n  cursor: pointer;\n  font-size: 14px;\n  &:hover {\n    color: #0275d8;\n  }\n`\n\nconst Grid = styled.td`\n  vertical-align: middle !important;\n  background: ${(props) => `${props.bg} !important` || 'none'};\n  color: ${_getTextColor};\n  &:hover {\n    background: #fafafa;\n    ${DelBtn} {\n      display: initial;\n    }\n\n    ${EditBtn} {\n      display: initial;\n    }\n  }\n`\n\nfunction _getTextColor(props) {\n  if (props.bg) {\n    const { r, g, b } = _hexToRgb(props.bg)\n    const bri = Math.sqrt(r * r * 0.241 + g * g * 0.691 + b * b * 0.068)\n    if (bri < 125) {\n      return '#fff'\n    }\n\n    return ''\n  }\n\n  return ''\n}\n\nfunction _hexToRgb(hex) {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n  return result\n    ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n      }\n    : null\n}\n\nexport default class CourseGrid extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      mouseEnter: false\n    }\n\n    this.handleMouseEnter = this.handleMouseEnter.bind(this)\n    this.handleMouseLeave = this.handleMouseLeave.bind(this)\n    this.handleDel = this.handleDel.bind(this)\n    this.handleEdit = this.handleEdit.bind(this)\n  }\n\n  handleMouseEnter() {\n    this.setState({\n      mouseEnter: true\n    })\n  }\n\n  handleMouseLeave() {\n    this.setState({\n      mouseEnter: false\n    })\n  }\n\n  handleDel(e) {\n    if (this.props.shared) return\n    const time = e.target.parentNode.parentNode.parentNode.getAttribute(\n      'data-time'\n    )\n    const rowspan = e.target.parentNode.parentNode.getAttribute('rowspan')\n    this.props.onDelCourse(time, rowspan, this.props.dayOfWeek)\n  }\n\n  handleEdit(e) {\n    if (this.props.shared) return\n    this.props.onEditCourse({\n      time: e.target.parentNode.parentNode.parentNode.parentNode.getAttribute(\n        'data-time'\n      ),\n      dayOfWeek: this.props.dayOfWeek,\n      title: this.props.title,\n      desc: this.props.desc,\n      bg: this.props.bg\n    })\n  }\n\n  hexToRgb(hex) {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n    return result\n      ? {\n          r: parseInt(result[1], 16),\n          g: parseInt(result[2], 16),\n          b: parseInt(result[3], 16)\n        }\n      : null\n  }\n\n  render() {\n    return (\n      <Grid\n        bg={this.props.bg}\n        rowSpan={this.props.rowspan || 1}\n        onMouseEnter={this.handleMouseEnter}\n        onMouseLeave={this.handleMouseLeave}\n      >\n        {!this.props.shared && this.props.title && this.state.mouseEnter && (\n          <span className=\"float-right mr-2\">\n            <DelBtn className=\"text-danger\" onClick={this.handleDel}>\n              &times;\n            </DelBtn>\n            <br />\n            <EditBtnContainer>\n              <EditBtn\n                className=\"fa fa-pencil\"\n                aria-hidden=\"true\"\n                onClick={this.handleEdit}\n              ></EditBtn>\n            </EditBtnContainer>\n          </span>\n        )}\n\n        {this.props.title && this.props.title}\n        <br className=\"uniBR\" />\n        {this.props.desc && this.props.desc}\n      </Grid>\n    )\n  }\n}\n","import React from 'react'\nimport { Table } from 'reactstrap'\nimport styled from 'styled-components'\n\nimport CourseGrid from './CourseGrid'\n\nconst DelBtn = styled.i`\n  display: none;\n  &:hover {\n    cursor: pointer;\n    color: #c9302c !important;\n  }\n`\n\nconst WeekendTitle = styled.th`\n  width: auto;\n  &:hover {\n    ${DelBtn} {\n      display: initial;\n    }\n  }\n`\n\nexport default class CourseTable extends React.Component {\n  componentDidUpdate() {\n    const classArr = document\n      .getElementById('CustomTable')\n      .className.replace('table-bordered', '')\n      .trim()\n      .split(' ')\n    document.getElementById('CustomTable').className = classArr.join(' ')\n    setTimeout(() => {\n      document.getElementById('CustomTable').className += ' table-bordered'\n    }, 1)\n  }\n\n  render() {\n    const timeNo = [\n      'a/08',\n      'b/09',\n      'c/10',\n      'd/11',\n      'z/12',\n      'e/13',\n      'f/14',\n      'g/15',\n      'h/16',\n      'i/17',\n      'j/18',\n      'k/19',\n      'l/20',\n      'm/21'\n    ]\n    return (\n      <div>\n        <Table\n          id=\"CustomTable\"\n          bordered\n          responsive\n          size=\"sm\"\n          style={{ background: '#fff', tableLayout: 'fixed' }}\n        >\n          <thead>\n            <tr>\n              <th style={{ width: '60px' }}></th>\n              <th className=\"text-center\">星期一</th>\n              <th className=\"text-center\">星期二</th>\n              <th className=\"text-center\">星期三</th>\n              <th className=\"text-center\">星期四</th>\n              <th className=\"text-center\">星期五</th>\n              {this.props.tableData.sat && (\n                <WeekendTitle className=\"text-center\">\n                  星期六{' '}\n                  <DelBtn\n                    className=\"fa fa-times-circle text-danger\"\n                    aria-hidden=\"true\"\n                    onClick={() => {\n                      !this.props.shared && this.props.onDelSatOrSun('sat')\n                    }}\n                  ></DelBtn>\n                </WeekendTitle>\n              )}\n\n              {this.props.tableData.sun && (\n                <WeekendTitle className=\"text-center\">\n                  星期日{' '}\n                  <DelBtn\n                    className=\"fa fa-times-circle text-danger\"\n                    aria-hidden=\"true\"\n                    onClick={() => {\n                      !this.props.shared && this.props.onDelSatOrSun('sun')\n                    }}\n                  ></DelBtn>\n                </WeekendTitle>\n              )}\n            </tr>\n          </thead>\n          <tbody>\n            {timeNo.map((t, i) => {\n              return (\n                <tr data-time={t} key={i}>\n                  <th className=\"text-center\">{t}</th>\n                  {Object.keys(this.props.tableData.course[t]).map((key, i) => {\n                    const courseData = this.props.tableData.course[t][key]\n                    if (courseData === null) {\n                      return null\n                    }\n\n                    if (!this.props.tableData.sat && key === '5') {\n                      return null\n                    }\n\n                    if (!this.props.tableData.sun && key === '6') {\n                      return null\n                    }\n\n                    return (\n                      <CourseGrid\n                        {...courseData}\n                        key={i}\n                        dayOfWeek={key}\n                        shared={this.props.shared}\n                        onDelCourse={this.props.onDelCourse}\n                        onEditCourse={this.props.onEditCourse}\n                      />\n                    )\n                  })}\n                </tr>\n              )\n            })}\n          </tbody>\n        </Table>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport {\n  Button,\n  ButtonDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem\n} from 'reactstrap'\n\nexport default class ToolBar extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      exportDropdownOpen: false,\n      clearDropdownOpen: false\n    }\n\n    this.toggleExportDropdown = this.toggleExportDropdown.bind(this)\n    this.toggleClearDropdown = this.toggleClearDropdown.bind(this)\n  }\n\n  toggleExportDropdown() {\n    this.setState((prevState) => ({\n      exportDropdownOpen: !prevState.exportDropdownOpen\n    }))\n  }\n\n  toggleClearDropdown() {\n    this.setState((prevState) => ({\n      clearDropdownOpen: !prevState.clearDropdownOpen\n    }))\n  }\n\n  handleExportExcel(e) {\n    document.querySelectorAll('.uniBR').forEach((val) => {\n      val.setAttribute('style', 'mso-data-placement:same-cell')\n    })\n    const html =\n      '<html><head><meta charset=\"utf-8\"></head><body>' +\n      document.getElementById('CustomTable').parentNode.innerHTML +\n      '</body></html>'\n    window.open('data:application/vnd.ms-excel,' + encodeURIComponent(html))\n    e.preventDefault()\n  }\n\n  handleExportPNG() {\n    window.html2canvas(document.querySelectorAll('#CustomTable'), {\n      onrendered: function (canvas) {\n        //\n      }\n    })\n    window.html2canvas(document.querySelectorAll('#CustomTable'), {\n      onrendered: function (canvas) {\n        window.Canvas2Image.saveAsPNG(canvas)\n      }\n    })\n  }\n\n  render() {\n    const btnStyle = { cursor: 'pointer', marginBottom: '5px' }\n    return (\n      <div>\n        <Button\n          color=\"primary\"\n          size=\"sm\"\n          className=\"mr-1\"\n          style={btnStyle}\n          onClick={this.props.onSave}\n        >\n          <i className=\"fa fa-floppy-o\" aria-hidden=\"true\"></i>{' '}\n          <span className=\"d-none d-sm-inline\">儲存</span>\n        </Button>\n        <Button\n          color=\"light\"\n          size=\"sm\"\n          className=\"mr-1\"\n          style={btnStyle}\n          onClick={this.props.onShare}\n        >\n          <i className=\"fa fa-share-square-o\" aria-hidden=\"true\"></i>{' '}\n          <span className=\"d-none d-sm-inline\">分享</span>\n        </Button>\n        <ButtonDropdown\n          className=\"mr-1\"\n          isOpen={this.state.exportDropdownOpen}\n          style={btnStyle}\n          size=\"sm\"\n          toggle={this.toggleExportDropdown}\n        >\n          <DropdownToggle caret color=\"light\">\n            <i className=\"fa fa-download\" aria-hidden=\"true\"></i>{' '}\n            <span className=\"d-none d-sm-inline\">匯出</span>\n          </DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem onClick={this.handleExportExcel}>\n              <i className=\"fa fa-file-excel-o\" aria-hidden=\"true\"></i> .xls\n            </DropdownItem>\n            <DropdownItem onClick={this.handleExportPNG}>\n              <i className=\"fa fa-file-image-o\" aria-hidden=\"true\"></i> .png\n            </DropdownItem>\n          </DropdownMenu>\n        </ButtonDropdown>\n        <span className=\"ml-2 mr-2\"></span>\n        <ButtonDropdown\n          className=\"mr-1\"\n          isOpen={this.state.clearDropdownOpen}\n          style={btnStyle}\n          size=\"sm\"\n          toggle={this.toggleClearDropdown}\n        >\n          <DropdownToggle caret color=\"light\">\n            <i className=\"fa fa-repeat\" aria-hidden=\"true\"></i>{' '}\n            <span className=\"d-none d-sm-inline\">清除</span>\n          </DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem onClick={this.props.onReColor}>\n              <i className=\"fa fa-magic\" aria-hidden=\"true\"></i> 標記\n            </DropdownItem>\n            <DropdownItem onClick={this.props.onReTable}>\n              <i className=\"fa fa-table\" aria-hidden=\"true\"></i> 課表\n            </DropdownItem>\n          </DropdownMenu>\n        </ButtonDropdown>\n        <Button\n          color=\"light\"\n          size=\"sm\"\n          className=\"mr-1\"\n          style={btnStyle}\n          onClick={this.props.onClickCustom}\n        >\n          <i className=\"fa fa-plus\" aria-hidden=\"true\"></i>{' '}\n          <span className=\"d-none d-sm-inline\">自訂時段</span>\n        </Button>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport {\n  Row,\n  Col,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Button,\n  Form,\n  FormGroup,\n  Label,\n  Input\n} from 'reactstrap'\nimport PropTypes from 'prop-types'\nimport cloneDeep from 'lodash.clonedeep'\n\nimport CourseList from './CourseList.jsx'\nimport CourseTable from './CourseTable.jsx'\nimport ToolBar from './ToolBar.jsx'\n\nexport default class CourseTableContainer extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      deptList: {},\n      courseList: {},\n      customTable: {\n        course: {\n          'a/08': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'b/09': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'c/10': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'd/11': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'z/12': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'e/13': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'f/14': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'g/15': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'h/16': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'i/17': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'j/18': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'k/19': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'l/20': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} },\n          'm/21': { 0: {}, 1: {}, 2: {}, 3: {}, 4: {}, 5: {}, 6: {} }\n        },\n        sat: false,\n        sun: false\n      },\n      modalEditCourse: {\n        open: false,\n        modalTitle: '編輯課程',\n        title: '',\n        desc: '',\n        bg: ''\n      },\n      modalCustomCourseOpen: false,\n      filterConflict: false,\n      modalFilterCourseOpen: false,\n      filterCourseForm: {\n        cname: '',\n        teacher: '',\n        time: '',\n        location: ''\n      }\n    }\n    this.timeMap = {\n      a: 'a/08',\n      b: 'b/09',\n      c: 'c/10',\n      d: 'd/11',\n      z: 'z/12',\n      e: 'e/13',\n      f: 'f/14',\n      g: 'g/15',\n      h: 'h/16',\n      i: 'i/17',\n      j: 'j/18',\n      k: 'k/19',\n      l: 'l/20',\n      m: 'm/21'\n    }\n    this.timeOrder = [\n      'a',\n      'b',\n      'c',\n      'd',\n      'z',\n      'e',\n      'f',\n      'g',\n      'h',\n      'i',\n      'j',\n      'k',\n      'l',\n      'm'\n    ]\n    this.db = window.firebase.database()\n    this.getCourseList = this.getCourseList.bind(this)\n    this.getCourseData = this.getCourseData.bind(this)\n    this.changeDept = this.changeDept.bind(this)\n    this.getTableData = this.getTableData.bind(this)\n    this.checkConflict = this.checkConflict.bind(this)\n    this.handleDelSatOrSun = this.handleDelSatOrSun.bind(this)\n    this.handleDelCourse = this.handleDelCourse.bind(this)\n    this.handleOpenEditModal = this.handleOpenEditModal.bind(this)\n    this.toggleModalEditCourse = this.toggleModalEditCourse.bind(this)\n    this.handleEditCourse = this.handleEditCourse.bind(this)\n    this.handleReColor = this.handleReColor.bind(this)\n    this.handleReTable = this.handleReTable.bind(this)\n    this.toggleModalCustomCourse = this.toggleModalCustomCourse.bind(this)\n    this.handleAddCustomCourse = this.handleAddCustomCourse.bind(this)\n    this.handleSave = this.handleSave.bind(this)\n    this.handleShare = this.handleShare.bind(this)\n    this.filterConflict = this.filterConflict.bind(this)\n    this.toggleModalFilterCourse = this.toggleModalFilterCourse.bind(this)\n    this.handleFilterCourse = this.handleFilterCourse.bind(this)\n    this.handleClearFilterCourse = this.handleClearFilterCourse.bind(this)\n    this.handleFilterCourseChange = this.handleFilterCourseChange.bind(this)\n  }\n\n  componentDidMount() {\n    this.getCourseData()\n    this.getTableData()\n  }\n\n  getCourseList(dept = '通識') {\n    const sessionCourseList = window.sessionStorage.courseList\n      ? JSON.parse(window.sessionStorage.courseList)\n      : '{}'\n    /*\n\t\tif (sessionCourseList[dept]) {\n\t\t\t// console.log(`course in ${dept} exist in sessionStorage`);\n\t\t\tthis.setState({\n\t\t\t\tcourseList: Object.assign({}, sessionCourseList[dept])\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\t*/\n\n    // console.log(`Getting course in ${dept}`);\n    this.db\n      .ref(`course/${dept}`)\n      .once('value')\n      .then((snapshot) => {\n        this.setState({\n          courseList: snapshot.val() || {}\n        })\n        window.sessionStorage.courseList = JSON.stringify(\n          Object.assign({}, sessionCourseList, { [dept]: snapshot.val() })\n        )\n      })\n  }\n\n  getCourseData() {\n    // console.log('Getting course data...');\n    if (/* !window.sessionStorage.deptList */ true) {\n      // console.log('Getting deptList from db...')\n      this.db\n        .ref('deptList/')\n        .once('value')\n        .then((snapshot) => {\n          window.sessionStorage.deptList = JSON.stringify(snapshot.val() || {})\n          this.setState({\n            deptList: snapshot.val() || {}\n          })\n        })\n    } else {\n      // console.log('deptList exist in sessionStorage.')\n      this.setState({\n        deptList: Object.assign({}, JSON.parse(window.sessionStorage.deptList))\n      })\n    }\n\n    this.getCourseList()\n  }\n\n  changeDept(dept) {\n    this.getCourseList(dept)\n  }\n\n  getTableData() {\n    const user = this.context.user\n    if (user === null) {\n      setTimeout(this.getTableData, 100)\n      return\n    }\n\n    if (user.uid) {\n      // logged in, get data from db\n      // console.log('Getting custom table data');\n      this.db\n        .ref(`customTable/${user.uuid}`)\n        .once('value')\n        .then((snapshot) => {\n          const tableData = snapshot.val()\n          tableData &&\n            this.setState({\n              customTable: Object.assign({}, JSON.parse(tableData))\n            })\n        })\n    }\n  }\n\n  checkConflict(courseData, shouldAddCourse) {\n    // if !shouldAddCourse => only check course conflict\n    // validate time\n    const time = courseData.time.toLowerCase() // '2bc3g'\n    const sections = this.apartCourseTime(time) // ['abc', '3g']\n    let timeValid = true\n    sections.some((t) => {\n      const valid = this.validateTime(t)\n      if (!valid.valid) {\n        shouldAddCourse && alert(valid.msg)\n        timeValid = false\n        return true\n      }\n\n      return false\n    })\n\n    if (timeValid) {\n      let conflict = false\n      const customTable = cloneDeep(this.state.customTable) // prevent call by reference\n      sections.forEach((t, index) => {\n        if (conflict) {\n          return\n        }\n\n        const time = t // 2ab\n        const dayOfWeek = time[0] // 2\n        const startTime = time[1] // a\n        const rowspan = time.length - 1 // 2\n        if (\n          customTable.course[this.timeMap[startTime]][dayOfWeek - 1] === null ||\n          customTable.course[this.timeMap[startTime]][dayOfWeek - 1].title\n        ) {\n          conflict = true\n          return\n        }\n\n        if (shouldAddCourse) {\n          customTable.course[this.timeMap[startTime]][dayOfWeek - 1] = {\n            // customTable.course['a/08'][1]\n            rowspan: rowspan,\n            title: courseData.cname || courseData.title,\n            desc:\n              courseData.desc || `${courseData.location} ${courseData.teacher}`,\n            bg: courseData.bg || ''\n          }\n        }\n\n        let nextTimeOrder = this.timeOrder.indexOf(startTime) + 1\n        let nextTime = this.timeMap[this.timeOrder[nextTimeOrder]]\n        for (let i = 0; i < rowspan - 1; i++) {\n          const nextTimeCourse = customTable.course[nextTime][dayOfWeek - 1]\n          if (nextTimeCourse === null || nextTimeCourse.title) {\n            conflict = true\n            return\n          }\n\n          shouldAddCourse &&\n            (customTable.course[nextTime][dayOfWeek - 1] = null)\n          nextTimeOrder++\n          nextTime = this.timeMap[this.timeOrder[nextTimeOrder]]\n        }\n\n        if (!shouldAddCourse) return\n\n        if (dayOfWeek === '6' && !customTable.sat) {\n          customTable.sat = true\n        }\n\n        if (dayOfWeek === '7' && !customTable.sun) {\n          customTable.sun = true\n        }\n      })\n\n      if (!!conflict && shouldAddCourse) {\n        alert('!!! 衝堂 !!!')\n        return\n      }\n\n      shouldAddCourse &&\n        this.setState({\n          customTable: cloneDeep(customTable)\n        })\n\n      return conflict\n    }\n\n    return false\n  }\n\n  validateTime(t) {\n    if (/^[1-7]{1}[A-MZa-mz]+$/.test(t)) {\n      let last = -1\n      let err = 0\n      for (let i = 1; i < t.length; i++) {\n        let current = t[i].charCodeAt()\n        if (last !== -1) {\n          if (current === 122) {\n            // z\n            if (last !== 100) {\n              err++\n              break\n            }\n\n            last = current\n            continue\n          }\n\n          if (current === 101) {\n            // e\n            if (last !== 122) {\n              err++\n              break\n            }\n\n            last = current\n            continue\n          }\n\n          if (current !== +last + 1) {\n            err++\n            break\n          }\n        }\n\n        last = current\n      }\n\n      if (err) {\n        return {\n          valid: false,\n          msg: '時段不連續'\n        }\n      } else {\n        return {\n          valid: true\n        }\n      }\n    } else {\n      return {\n        valid: false,\n        msg: '時間格式錯誤'\n      }\n    }\n  }\n\n  apartCourseTime(t) {\n    let result = []\n    if (t === '') {\n      return ['zzzzz']\n    }\n\n    if (t.replace(/[1-7]{1}[A-MZa-mz]+/g, '').length > 0) {\n      result.push(t)\n      return result\n    }\n\n    return t.match(/[1-7]{1}[A-MZa-mz]+/g)\n  }\n\n  handleDelSatOrSun(day) {\n    const customTable = cloneDeep(this.state.customTable)\n    customTable[day] = false\n    const dayOrder = day === 'sat' ? 5 : 6\n    Object.keys(customTable.course).forEach((key, i) => {\n      customTable.course[key][dayOrder] = {}\n    })\n\n    this.setState({\n      customTable: cloneDeep(customTable)\n    })\n  }\n\n  handleDelCourse(time, rowspan, dayOfWeek) {\n    // 'a/08', '2', '0'\n    const customTable = cloneDeep(this.state.customTable)\n    customTable.course[time][dayOfWeek] = {}\n    let nextTimeOrder = this.timeOrder.indexOf(time[0]) + 1\n    let nextTime = this.timeMap[this.timeOrder[nextTimeOrder]]\n    for (let i = 0; i < rowspan - 1; i++) {\n      customTable.course[nextTime][dayOfWeek] = {}\n      nextTimeOrder++\n      nextTime = this.timeMap[this.timeOrder[nextTimeOrder]]\n    }\n\n    this.setState({\n      customTable: cloneDeep(customTable)\n    })\n  }\n\n  handleOpenEditModal(courseData) {\n    const modalEditCourse = cloneDeep(this.state.modalEditCourse)\n    modalEditCourse.open = true\n    modalEditCourse.modalTitle = `編輯 ${courseData.title}`\n    modalEditCourse.title = courseData.title\n    modalEditCourse.desc = courseData.desc\n    modalEditCourse.bg = courseData.bg\n    modalEditCourse.time = courseData.time\n    modalEditCourse.dayOfWeek = courseData.dayOfWeek\n    this.setState({\n      modalEditCourse: cloneDeep(modalEditCourse)\n    })\n  }\n\n  toggleModalEditCourse() {\n    const modalEditCourse = cloneDeep(this.state.modalEditCourse)\n    modalEditCourse.open = !modalEditCourse.open\n    this.setState({\n      modalEditCourse: cloneDeep(modalEditCourse)\n    })\n  }\n\n  handleEditCourse(time, dayOfWeek) {\n    // 'a/08', '0'\n    if (document.getElementById('ModalEditCourse__inputTitle').value === '') {\n      alert('標題不得為空')\n      return\n    }\n\n    const modalEditCourse = cloneDeep(this.state.modalEditCourse)\n    modalEditCourse.open = false\n\n    const customTable = cloneDeep(this.state.customTable)\n    customTable.course[time][dayOfWeek].title = document.getElementById(\n      'ModalEditCourse__inputTitle'\n    ).value\n    customTable.course[time][dayOfWeek].desc = document.getElementById(\n      'ModalEditCourse__inputDesc'\n    ).value\n    customTable.course[time][dayOfWeek].bg = document.getElementById(\n      'ModalEditCourse__inputBg'\n    ).value\n\n    this.setState({\n      modalEditCourse: cloneDeep(modalEditCourse),\n      customTable: cloneDeep(customTable)\n    })\n  }\n\n  handleReColor() {\n    const customTable = cloneDeep(this.state.customTable)\n    Object.keys(customTable.course).forEach((time) => {\n      Object.keys(customTable.course[time]).forEach((dayOrder) => {\n        customTable.course[time][dayOrder] &&\n          (customTable.course[time][dayOrder].bg = '')\n      })\n    })\n\n    this.setState({\n      customTable: cloneDeep(customTable)\n    })\n  }\n\n  handleReTable() {\n    const customTable = cloneDeep(this.state.customTable)\n    Object.keys(customTable.course).forEach((time) => {\n      Object.keys(customTable.course[time]).forEach((dayOrder) => {\n        customTable.course[time][dayOrder] = {}\n      })\n    })\n\n    customTable.sat = false\n    customTable.sun = false\n    this.setState({\n      customTable: cloneDeep(customTable)\n    })\n  }\n\n  toggleModalCustomCourse() {\n    this.setState((prevState) => ({\n      modalCustomCourseOpen: !prevState.modalCustomCourseOpen\n    }))\n  }\n\n  handleAddCustomCourse() {\n    const time = document.getElementById('ModalCustomCourse__inputTime').value\n    const title = document.getElementById('ModalCustomCourse__inputTitle').value\n    if (!time || !title) {\n      alert('時間、標題不得為空')\n      return\n    }\n\n    this.checkConflict(\n      {\n        time,\n        title,\n        desc:\n          document.getElementById('ModalCustomCourse__inputDesc').value || ' ',\n        bg: document.getElementById('ModalCustomCourse__inputBg').value\n      },\n      true\n    )\n\n    this.toggleModalCustomCourse()\n  }\n\n  handleSave() {\n    this.db\n      .ref(`customTable/${this.context.user.uuid}`)\n      .set(JSON.stringify(this.state.customTable))\n      .then(() => {\n        alert('儲存成功!')\n      })\n  }\n\n  handleShare() {\n    const uuid = this.context.user.uuid\n    const hash = (Date.now() * Math.random() * Math.random())\n      .toString(16)\n      .replace('.', '')\n      .substring(2, 6)\n    this.db\n      .ref(`sharedTable/${uuid}`)\n      .set(JSON.stringify({ [hash]: this.state.customTable }))\n      .then(() => {\n        prompt(\n          '已將當前課表分享於以下連結',\n          `${process.env.REACT_APP_BASE_URL}/#/share/${uuid}${hash}`\n        )\n      })\n  }\n\n  filterConflict() {\n    this.setState((prevState) => ({\n      filterConflict: !prevState.filterConflict\n    }))\n  }\n\n  toggleModalFilterCourse() {\n    this.setState((prevState) => ({\n      modalFilterCourseOpen: !prevState.modalFilterCourseOpen\n    }))\n  }\n\n  handleFilterCourseChange(event, field) {\n    const value = event.target.value\n    this.setState((prevState) => ({\n      filterCourseForm: Object.assign({}, prevState.filterCourseForm, {\n        [field]: value\n      })\n    }))\n  }\n\n  handleFilterCourse() {\n    this.setState(() => ({\n      modalFilterCourseOpen: false\n    }))\n  }\n\n  handleClearFilterCourse() {\n    this.setState(() => ({\n      filterCourseForm: {\n        cname: '',\n        teacher: '',\n        time: '',\n        location: ''\n      },\n      modalFilterCourseOpen: false\n    }))\n  }\n\n  render() {\n    let courseList = cloneDeep(this.state.courseList)\n    let isFilterCourse = false\n    const parsedCourseList = []\n    const filterCourseForm = this.state.filterCourseForm\n\n    Object.keys(courseList).reduce((result, courseKey) => {\n      courseList[courseKey].isConflict = this.checkConflict(\n        courseList[courseKey],\n        false\n      )\n\n      const match = Object.keys(filterCourseForm).every((field) => {\n        if (filterCourseForm[field] === '') {\n          return true\n        }\n\n        isFilterCourse = true\n        if (\n          courseList[courseKey][field]\n            .toUpperCase()\n            .includes(filterCourseForm[field].toUpperCase())\n        ) {\n          return true\n        }\n\n        return false\n      })\n\n      if (match) {\n        parsedCourseList.push(courseList[courseKey])\n      }\n\n      return parsedCourseList\n    }, [])\n\n    return (\n      <div\n        style={{\n          background: '#fff',\n          padding: '20px 5px',\n          boxShadow: '0 0 10px 0 #080808'\n        }}\n      >\n        <Row className=\"mb-2\">\n          <Col xs=\"12\">\n            {this.context.user && this.context.user.uid && (\n              <ToolBar\n                onSave={this.handleSave}\n                onShare={this.handleShare}\n                onReColor={this.handleReColor}\n                onReTable={this.handleReTable}\n                onClickCustom={this.toggleModalCustomCourse}\n              />\n            )}\n          </Col>\n        </Row>\n        <Row className=\"mb-2\">\n          <Col xs=\"12\">\n            <CourseTable\n              tableData={this.state.customTable}\n              onDelSatOrSun={this.handleDelSatOrSun}\n              onDelCourse={this.handleDelCourse}\n              onEditCourse={this.handleOpenEditModal}\n            />\n            <hr />\n          </Col>\n        </Row>\n        <Row>\n          <Col xs=\"12\">\n            <CourseList\n              deptList={this.state.deptList}\n              courseList={parsedCourseList}\n              onChangeDept={this.changeDept}\n              onAddCourse={this.checkConflict}\n              filterConflict={this.state.filterConflict}\n              onFilterConflict={this.filterConflict}\n              filterCourse={isFilterCourse}\n              onFilterCourse={this.toggleModalFilterCourse}\n            />\n          </Col>\n        </Row>\n        <Modal\n          id=\"ModalEditCourse\"\n          isOpen={this.state.modalEditCourse.open}\n          toggle={this.toggleModalEditCourse}\n        >\n          <ModalHeader\n            id=\"ModalEditCourse__title\"\n            toggle={this.toggleModalEditCourse}\n          >\n            {this.state.modalEditCourse.modalTitle}\n          </ModalHeader>\n          <ModalBody>\n            <Form>\n              <FormGroup row>\n                <Label for=\"ModalEditCourse__inputTitle\" sm={2}>\n                  標題\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalEditCourse__inputTitle\"\n                    defaultValue={this.state.modalEditCourse.title}\n                    placeholder=\"課程名稱\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalEditCourse__inputDesc\" sm={2}>\n                  內容\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalEditCourse__inputDesc\"\n                    defaultValue={this.state.modalEditCourse.desc}\n                    placeholder=\"教師、地點\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalEditCourse__inputBg\" sm={2}>\n                  標記\n                </Label>\n                <Col sm={10}>\n                  <input\n                    id=\"ModalEditCourse__inputBg\"\n                    type=\"color\"\n                    defaultValue={this.state.modalEditCourse.bg || '#ffffff'}\n                    style={{ verticalAlign: 'sub', width: '100%' }}\n                  />\n                </Col>\n              </FormGroup>\n            </Form>\n          </ModalBody>\n          <ModalFooter>\n            <Button\n              color=\"primary\"\n              onClick={() => {\n                this.handleEditCourse(\n                  this.state.modalEditCourse.time,\n                  this.state.modalEditCourse.dayOfWeek\n                )\n              }}\n            >\n              確定\n            </Button>\n          </ModalFooter>\n        </Modal>\n        <Modal\n          id=\"ModalCustomCourse\"\n          isOpen={this.state.modalCustomCourseOpen}\n          toggle={this.toggleModalCustomCourse}\n        >\n          <ModalHeader toggle={this.toggleModalCustomCourse}>\n            自訂時段\n          </ModalHeader>\n          <ModalBody>\n            <Form>\n              <FormGroup row>\n                <Label for=\"ModalCustomCourse__inputTime\" sm={2}>\n                  時間\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalCustomCourse__inputTime\"\n                    placeholder=\"2bcd4jk\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalCustomCourse__inputTitle\" sm={2}>\n                  標題\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalCustomCourse__inputTitle\"\n                    placeholder=\"meeting\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalCustomCourse__inputDesc\" sm={2}>\n                  內容\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalCustomCourse__inputDesc\"\n                    placeholder=\"R438 with YCC\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalCustomCourse__inputBg\" sm={2}>\n                  標記\n                </Label>\n                <Col sm={10}>\n                  <input\n                    id=\"ModalCustomCourse__inputBg\"\n                    type=\"color\"\n                    defaultValue=\"#ffffff\"\n                    style={{ verticalAlign: 'sub', width: '100%' }}\n                  />\n                </Col>\n              </FormGroup>\n            </Form>\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"primary\" onClick={this.handleAddCustomCourse}>\n              確定\n            </Button>\n          </ModalFooter>\n        </Modal>\n        <Modal\n          id=\"ModalFilterCourse\"\n          isOpen={this.state.modalFilterCourseOpen}\n          toggle={this.toggleModalFilterCourse}\n        >\n          <ModalHeader\n            id=\"ModalFilterCourse__title\"\n            toggle={this.toggleModalFilterCourse}\n          >\n            篩選課程\n          </ModalHeader>\n          <ModalBody>\n            <Form>\n              <FormGroup row>\n                <Label for=\"ModalFilterCourse__inputCname\" sm={2}>\n                  課名\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalFilterCourse__inputCname\"\n                    value={this.state.filterCourseForm.cname}\n                    onChange={(e) => {\n                      this.handleFilterCourseChange(e, 'cname')\n                    }}\n                    placeholder=\"課程名稱\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalFilterCourse__inputTeacher\" sm={2}>\n                  教師\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalFilterCourse__inputTeacher\"\n                    value={this.state.filterCourseForm.teacher}\n                    onChange={(e) => {\n                      this.handleFilterCourseChange(e, 'teacher')\n                    }}\n                    placeholder=\"授課教師\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalFilterCourse__inputTime\" sm={2}>\n                  時間\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalFilterCourse__inputTime\"\n                    value={this.state.filterCourseForm.time}\n                    onChange={(e) => {\n                      this.handleFilterCourseChange(e, 'time')\n                    }}\n                    placeholder=\"1bcd\"\n                  />\n                </Col>\n              </FormGroup>\n              <FormGroup row>\n                <Label for=\"ModalFilterCourse__inputLocation\" sm={2}>\n                  教室\n                </Label>\n                <Col sm={10}>\n                  <Input\n                    type=\"text\"\n                    id=\"ModalFilterCourse__inputLocation\"\n                    value={this.state.filterCourseForm.location}\n                    onChange={(e) => {\n                      this.handleFilterCourseChange(e, 'location')\n                    }}\n                    placeholder=\"管268\"\n                  />\n                </Col>\n              </FormGroup>\n            </Form>\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"primary\" onClick={this.handleFilterCourse}>\n              篩選\n            </Button>\n            <Button color=\"danger\" onClick={this.handleClearFilterCourse}>\n              取消篩選\n            </Button>\n          </ModalFooter>\n        </Modal>\n      </div>\n    )\n  }\n}\n\nCourseTableContainer.contextTypes = {\n  user: PropTypes.object\n}\n","import React from 'react'\n\nimport App from './App.jsx'\nimport CourseTableContainer from './CourseTableContainer.jsx'\n\nexport default class Home extends React.Component {\n  render() {\n    return (\n      <App>\n        <CourseTableContainer />\n      </App>\n    )\n  }\n}\n","import React from 'react'\nimport { Container, Row, Col, Card, Label, Input, Button } from 'reactstrap'\nimport TagsInput from 'react-tagsinput'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nimport 'react-tagsinput/react-tagsinput.css'\nimport './ExchangeSetting.css'\n\nconst SettingContainer = styled(Container)`\n  background: #fff;\n  box-shadow: 0 0 5px 0 #888888;\n  position: absolute;\n  width: 100%;\n  z-index: 1;\n  left: 0;\n  top: ${(props) => props.top};\n  transition: all 0.5s;\n`\n\nconst Toggle = styled.div`\n  border-top: 1px solid rgba(0, 0, 0, 0.125);\n  background: #fafafa;\n  &:hover {\n    background: #f0f0f0;\n    cursor: pointer;\n  }\n`\n\nexport default class ExchangeSetting extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      wantTags: [],\n      haveTags: [],\n      desc: '',\n      filterTags: [],\n      published: false,\n      settingOpen: true\n    }\n\n    this.handleChangeWant = this.handleChangeWant.bind(this)\n    this.handleChangeHave = this.handleChangeHave.bind(this)\n    this.handleChangeDesc = this.handleChangeDesc.bind(this)\n    this.handleChangeFilter = this.handleChangeFilter.bind(this)\n    this.handleSave = this.handleSave.bind(this)\n    this.handleFilter = this.handleFilter.bind(this)\n    this.handleToggleSetting = this.handleToggleSetting.bind(this)\n    this.setSettingsFromProps = this.setSettingsFromProps.bind(this)\n  }\n\n  componentDidMount() {\n    this.setSettingsFromProps(this.props)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setSettingsFromProps(nextProps)\n  }\n\n  setSettingsFromProps(props) {\n    const exchangeSetting = props.exchangeList[this.context.user.uuid]\n      ? JSON.parse(props.exchangeList[this.context.user.uuid])\n      : null\n    if (exchangeSetting) {\n      this.setState({\n        wantTags: exchangeSetting.want,\n        haveTags: exchangeSetting.have,\n        desc: exchangeSetting.desc,\n        published: true\n      })\n    } else {\n      this.setState({\n        wantTags: [],\n        haveTags: [],\n        desc: '',\n        published: false\n      })\n    }\n  }\n\n  handleChangeWant(wantTags) {\n    this.setState({\n      wantTags\n    })\n  }\n\n  handleChangeHave(haveTags) {\n    this.setState({\n      haveTags\n    })\n  }\n\n  handleChangeDesc(e) {\n    this.setState({\n      desc: e.target.value\n    })\n  }\n\n  handleChangeFilter(filterTags) {\n    this.setState({\n      filterTags\n    })\n  }\n\n  handleSave() {\n    if (!!this.state.haveTags.length || !!this.state.wantTags.length) {\n      this.props.onSave(\n        this.state.haveTags,\n        this.state.wantTags,\n        this.state.desc\n      )\n    } else {\n      alert('請確保 Tag 有變成綠綠的 (於輸入框按下 Enter)')\n    }\n  }\n\n  handleFilter(clear) {\n    const keywords = this.state.filterTags\n    if (clear || !keywords.length) {\n      if (!clear && !keywords.length) {\n        alert('請確保 Tag 有變成綠綠的 (於輸入框按下 Enter)')\n      }\n\n      this.setState({\n        filterTags: []\n      })\n\n      this.props.onFilter(null)\n      return\n    }\n\n    this.props.onFilter(keywords)\n  }\n  handleToggleSetting() {\n    this.setState((prevState) => ({\n      settingOpen: !prevState.settingOpen\n    }))\n  }\n\n  render() {\n    return (\n      <SettingContainer\n        className=\"pt-3\"\n        top={\n          !this.state.settingOpen\n            ? `-${\n                document.getElementById('ExchangeSetting').offsetHeight + 32\n              }px`\n            : 0\n        }\n      >\n        <Row>\n          <Col xs=\"12\">\n            <div id=\"ExchangeSetting\">\n              <h5>設定個人換課資訊</h5>\n              <Card body>\n                <Row>\n                  <Col className=\"d-inline-block\" xs=\"4\">\n                    <Label for=\"ExchangeSetting__inputWant\">想要的課</Label>\n                    <TagsInput\n                      className=\"form-control\"\n                      id=\"ExchangeSetting__inputWant\"\n                      onlyUnique\n                      value={this.state.wantTags}\n                      onChange={this.handleChangeWant}\n                    />\n                  </Col>\n                  <Col className=\"d-inline-block\" xs=\"4\">\n                    <Label for=\"ExchangeSetting__inputHave\">不需要的課</Label>\n                    <TagsInput\n                      className=\"form-control\"\n                      id=\"ExchangeSetting__inputHave\"\n                      onlyUnique\n                      value={this.state.haveTags}\n                      onChange={this.handleChangeHave}\n                    />\n                  </Col>\n                  <Col className=\"d-inline-block\" xs=\"4\">\n                    <Label for=\"ExchangeSetting__inputDesc\">補充說明</Label>\n                    <Input\n                      type=\"textarea\"\n                      id=\"ExchangeSetting__inputDesc\"\n                      rows=\"1\"\n                      value={this.state.desc}\n                      onChange={this.handleChangeDesc}\n                    />\n                  </Col>\n                </Row>\n                <Row className=\"mt-2\">\n                  <Col xs=\"12\">\n                    {this.state.published && (\n                      <Button\n                        className=\"float-right\"\n                        size=\"sm\"\n                        color=\"danger\"\n                        onClick={() => {\n                          this.props.onUnpublish()\n                        }}\n                      >\n                        取消發佈\n                      </Button>\n                    )}\n\n                    <Button\n                      className=\"float-right mr-2\"\n                      size=\"sm\"\n                      color=\"primary\"\n                      onClick={this.handleSave}\n                    >\n                      儲存並發佈\n                    </Button>\n                  </Col>\n                </Row>\n              </Card>\n            </div>\n            <hr />\n            <h5>過濾換課資訊</h5>\n            <Row>\n              <Col xs=\"9\">\n                <TagsInput\n                  className=\"form-control\"\n                  id=\"Filter__input\"\n                  onlyUnique\n                  value={this.state.filterTags}\n                  onChange={this.handleChangeFilter}\n                />\n              </Col>\n              <Col className=\"text-center\" xs=\"3\">\n                <Button\n                  size=\"sm\"\n                  outline\n                  color=\"primary\"\n                  style={{ verticalAlign: 'sub' }}\n                  onClick={() => this.handleFilter(false)}\n                >\n                  <i className=\"fa fa-filter\" aria-hidden=\"true\"></i>{' '}\n                  <span className=\"hidden-sm-down\">過濾</span>\n                </Button>{' '}\n                <Button\n                  size=\"sm\"\n                  outline\n                  color=\"secondary\"\n                  style={{ verticalAlign: 'sub' }}\n                  onClick={() => this.handleFilter(true)}\n                >\n                  <i className=\"fa fa-refresh\" aria-hidden=\"true\"></i>{' '}\n                  <span className=\"hidden-sm-down\">清除</span>\n                </Button>\n              </Col>\n            </Row>\n            <Row className=\"mt-2\">\n              <Col className=\"text-center\" xs=\"12\">\n                <Toggle onClick={this.handleToggleSetting}>\n                  <i className=\"fa fa-bars\" aria-hidden=\"true\"></i>\n                </Toggle>\n              </Col>\n            </Row>\n          </Col>\n        </Row>\n      </SettingContainer>\n    )\n  }\n}\n\nExchangeSetting.contextTypes = {\n  user: PropTypes.object\n}\n","import React from 'react'\nimport { Row, Col, Card, Badge } from 'reactstrap'\nimport moment from 'moment'\nimport styled from 'styled-components'\n\nconst Container = styled(Card)`\n  padding: 5px 5px 5px 30px;\n`\n\nconst Profile = styled.img`\n  border-radius: 50px;\n`\n\nconst Username = styled.a`\n  color: #365899;\n  font-weight: bold;\n`\n\nconst Timestamp = styled.td`\n  font-size: 13px;\n  color: #989898;\n`\n\nconst Desc = styled.div`\n  font-size: 14px;\n  color: #666;\n  border-left: 3px solid #bbb;\n`\n\nconst CourseTitle = styled.h6`\n  border-bottom: 1px solid #787878;\n`\n\nconst Course = styled.div`\n  font-size: 14px;\n`\n\nexport default class ExchangeItem extends React.PureComponent {\n  render() {\n    const { fbLink, fbPicture, name, time, desc, have, want } = this.props.item\n    return (\n      <Container>\n        <Row>\n          <Col className=\"mt-1\" lg=\"5\" sm=\"12\" xs=\"12\">\n            <div>\n              <table>\n                <tbody>\n                  <tr>\n                    <td className=\"pr-1\" rowSpan=\"2\">\n                      <a\n                        href={fbLink}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        {...(!fbLink\n                          ? { onClick: (e) => e.preventDefault() }\n                          : {})}\n                      >\n                        <Profile\n                          height=\"45px\"\n                          src={\n                            fbPicture ||\n                            'https://graph.facebook.com/100/picture'\n                          }\n                          alt=\"\"\n                        />\n                      </a>\n                    </td>\n                    <td>\n                      <Username\n                        href={fbLink}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        {...(!fbLink\n                          ? { onClick: (e) => e.preventDefault() }\n                          : {})}\n                      >\n                        {name}\n                      </Username>\n                    </td>\n                  </tr>\n                  <tr>\n                    <Timestamp>\n                      {moment(time).utcOffset(8).format('YYYY/MM/DD HH:mm:ss')}\n                    </Timestamp>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            <Desc className=\"mt-1 ml-2 pl-1\">\n              {desc.split('\\n').map((val, i) => {\n                return <div key={i}>{val}</div>\n              })}\n            </Desc>\n          </Col>\n          <Col lg=\"4\" sm=\"12\" xs=\"12\">\n            <CourseTitle className=\"pl-3\">想要的課</CourseTitle>\n            {want.map((wnatCourse, i) => {\n              return (\n                <Course key={i}>\n                  <Badge color=\"secondary\" pill>\n                    {i + 1}\n                  </Badge>{' '}\n                  {wnatCourse}\n                </Course>\n              )\n            })}\n          </Col>\n          <Col lg=\"3\" sm=\"12\" xs=\"12\">\n            <CourseTitle className=\"pl-3\">不需要的課</CourseTitle>\n            {have.map((haveCourse, i) => {\n              return (\n                <Course key={i}>\n                  <Badge color=\"secondary\" pill>\n                    {i + 1}\n                  </Badge>{' '}\n                  {haveCourse}\n                </Course>\n              )\n            })}\n          </Col>\n        </Row>\n      </Container>\n    )\n  }\n}\n","import React from 'react'\nimport { Container, Row, Col } from 'reactstrap'\n\nimport ExchangeItem from './ExchangeItem'\n\nexport default class ExchangeList extends React.Component {\n  render() {\n    const containerStyle = {\n      marginTop: '190px',\n      transition: 'all .5s'\n    }\n\n    return (\n      <Container className=\"mb-5\" style={containerStyle}>\n        {this.props.exchangeList.map((item, i) => {\n          return (\n            <Row key={i} className=\"mb-2\">\n              <Col xs=\"12\">\n                <ExchangeItem item={item} />\n              </Col>\n            </Row>\n          )\n        })}\n      </Container>\n    )\n  }\n}\n","import React from 'react'\nimport { Row, Col, Container, Alert } from 'reactstrap'\nimport PropTypes from 'prop-types'\nimport moment from 'moment'\nimport cloenDeep from 'lodash.clonedeep'\n\nimport ExchangeSetting from './ExchangeSetting.jsx'\nimport ExchangeList from './ExchangeList.jsx'\nimport Loading from './Loading'\n\nexport default class ExchangeListContainer extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      exchangeList: {},\n      filter: null\n    }\n\n    this.db = window.firebase.database()\n    this.handleSaveExchangeSetting = this.handleSaveExchangeSetting.bind(this)\n    this.handleUnpublish = this.handleUnpublish.bind(this)\n    this.handleFilter = this.handleFilter.bind(this)\n    this.parseList = this.parseList.bind(this)\n  }\n\n  componentDidMount() {\n    this.getExchangeList()\n  }\n\n  getExchangeList() {\n    this.db\n      .ref('exchangeList/')\n      .once('value')\n      .then((snapshot) => {\n        const data = snapshot.val() || {}\n        this.setState({\n          exchangeList: data\n        })\n      })\n  }\n\n  handleSaveExchangeSetting(have, want, desc) {\n    const {\n      displayName: name,\n      uid: fbid,\n      fbLink = null,\n      fbPicture = '',\n      uuid\n    } = this.context.user\n    const time = moment().format()\n    this.db\n      .ref(`exchangeList/${uuid}`)\n      .set(\n        JSON.stringify({\n          fbid,\n          fbLink,\n          fbPicture,\n          name,\n          want,\n          have,\n          desc,\n          time\n        })\n      )\n      .then(() => {\n        this.getExchangeList()\n      })\n  }\n\n  handleUnpublish() {\n    this.db\n      .ref(`exchangeList/${this.context.user.uuid}`)\n      .remove()\n      .then(() => {\n        this.getExchangeList()\n      })\n  }\n\n  handleFilter(keywords) {\n    this.setState({\n      filter: keywords\n    })\n  }\n\n  parseList() {\n    const exchangeList = cloenDeep(this.state.exchangeList)\n    const filterArr = this.state.filter ? cloenDeep(this.state.filter) : null\n\n    let result = Object.values(exchangeList).map((val) => {\n      return JSON.parse(val)\n    })\n\n    result = this.shuffle(result)\n    if (filterArr) {\n      result = result.filter((val) => {\n        let valid = false\n        let testString = val.have.join('') + val.want.join('')\n        filterArr.forEach((keyword) => {\n          if (testString.includes(keyword)) {\n            valid = true\n          }\n        })\n\n        return valid\n      })\n    }\n\n    return result\n  }\n\n  shuffle(array) {\n    var currentIndex = array.length,\n      temporaryValue,\n      randomIndex\n\n    // While there remain elements to shuffle...\n    while (0 !== currentIndex) {\n      // Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex)\n      currentIndex -= 1\n\n      // And swap it with the current element.\n      temporaryValue = array[currentIndex]\n      array[currentIndex] = array[randomIndex]\n      array[randomIndex] = temporaryValue\n    }\n\n    return array\n  }\n\n  render() {\n    const containerStyle = {\n      height: 'calc(100vh - 52px)',\n      overflow: 'auto',\n      background: '#fff'\n    }\n\n    const exchangeList = this.parseList()\n\n    return (\n      <div>\n        {this.context.user && !this.context.user.uid && (\n          <Row>\n            <Col xs=\"12\">\n              <Alert className=\"text-center mt-3\" color=\"danger\">\n                請先登入\n              </Alert>\n            </Col>\n          </Row>\n        )}\n\n        {this.context.user && this.context.user.uid && (\n          <div>\n            <ExchangeSetting\n              exchangeList={this.state.exchangeList}\n              onSave={this.handleSaveExchangeSetting}\n              onUnpublish={this.handleUnpublish}\n              onToggleSetting={this.handleToggleSetting}\n              onFilter={this.handleFilter}\n            />\n            <Container style={containerStyle}>\n              {!exchangeList.length && <Loading marginTop={450} />}\n              <Row>\n                <Col xs=\"12\">\n                  <ExchangeList exchangeList={exchangeList} />\n                </Col>\n              </Row>\n            </Container>\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\nExchangeListContainer.contextTypes = {\n  user: PropTypes.object\n}\n","import React from 'react'\n\nimport App from './App.jsx'\nimport ExchangeListContainer from './ExchangeListContainer.jsx'\n\nexport default class Exchange extends React.Component {\n  render() {\n    return (\n      <App {...this.props}>\n        <ExchangeListContainer />\n      </App>\n    )\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Row, Col, Alert } from 'reactstrap'\nimport styled from 'styled-components'\n\nimport App from './App.jsx'\nimport CourseTable from './CourseTable.jsx'\n\nconst ShareContainer = styled.div`\n  background: #fff;\n  padding: 20px 5px;\n  box-shadow: 0 0 10px 0 #080808;\n  margin-top: 55px;\n  margin-bottom: 55px;\n`\n\nexport default class Share extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      customTable: 'Loading...'\n    }\n\n    this.db = window.firebase.database()\n  }\n\n  componentDidMount() {\n    const routeHash = this.context.router.route.match.params.hash\n    const uuid = routeHash.substring(0, routeHash.length - 4)\n    const hash = routeHash.substring(routeHash.length - 4, routeHash.length)\n    this.db\n      .ref(`sharedTable/${uuid}`)\n      .once('value')\n      .then((snapshot) => {\n        const data = snapshot.val()\n        if (data === null) {\n          this.setState({\n            customTable: '連結無效'\n          })\n          return\n        }\n\n        const tableData = JSON.parse(data)[hash]\n        if (!tableData) {\n          this.setState({\n            customTable: '連結無效'\n          })\n          return\n        }\n\n        this.setState({\n          customTable: tableData\n        })\n      })\n  }\n\n  render() {\n    return (\n      <App>\n        <ShareContainer>\n          <Row>\n            <Col xs=\"12\">\n              {typeof this.state.customTable === 'string' && (\n                <Alert className=\"text-center\" color=\"warning\">\n                  {this.state.customTable}\n                </Alert>\n              )}\n\n              {typeof this.state.customTable !== 'string' && (\n                <CourseTable tableData={this.state.customTable} shared />\n              )}\n            </Col>\n          </Row>\n        </ShareContainer>\n      </App>\n    )\n  }\n}\n\nShare.contextTypes = {\n  router: PropTypes.object\n}\n","import React from 'react'\nimport TagsInput from 'react-tagsinput'\nimport { ButtonGroup, Button } from 'reactstrap'\n\nimport './CourseReviewFilter.css'\n\nexport default class CourseReviewFilter extends React.Component {\n  render() {\n    return (\n      <div className=\"mt-2\">\n        <h5>搜尋課程</h5>\n        <TagsInput\n          className=\"form-control\"\n          id=\"ExchangeSetting__inputWant\"\n          value={this.props.filterTags}\n          onChange={this.props.onFilter}\n          onlyUnique\n        />\n        <div className=\"mt-2\">\n          <ButtonGroup size=\"sm\">\n            <Button\n              className={this.props.sortType === 1 ? 'active' : ''}\n              onClick={() => this.props.onChangeSortType(1)}\n            >\n              時間優先\n            </Button>{' '}\n            <Button\n              className={this.props.sortType === 2 ? 'active' : ''}\n              onClick={() => this.props.onChangeSortType(2)}\n            >\n              評價優先\n            </Button>\n          </ButtonGroup>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport { Card, CardBody, CardColumns } from 'reactstrap'\nimport moment from 'moment'\nimport styled, { css } from 'styled-components'\n\nimport './CourseReviewList.css'\n\nconst ReviewCard = styled(Card)`\n  border-radius: 0;\n  box-shadow: 0 0 5px 0px #dddddd;\n`\n\nReviewCard.DelBtn = styled.span`\n  position: absolute;\n  right: 15px;\n  font-size: 26px;\n  top: 12px;\n  cursor: pointer;\n  height: 17px;\n  line-height: 17px;\n  color: #d9534f;\n  &:hover {\n    color: #c9302c;\n  }\n`\n\nReviewCard.UserImg = styled.img`\n  border-radius: 30px;\n`\n\nReviewCard.Username = styled.span`\n  color: #365899;\n  font-size: 14px;\n  font-weight: bold;\n`\n\nReviewCard.Date = styled.span`\n  font-size: 12px;\n  color: #90949c;\n`\n\nReviewCard.Title = styled.div`\n  font-weight: bold;\n`\n\nReviewCard.Content = styled.div`\n  white-space: pre-line;\n`\n\nReviewCard.LikeBtn = styled.span`\n  flex: 1;\n  padding: 7px;\n  transition: all 0.3s;\n  ${(props) =>\n    props.like &&\n    css`\n      color: #0275d8;\n      font-weight: bold;\n    `}\n\n  &:hover {\n    background: #0275d8;\n    color: #fff;\n    cursor: pointer;\n  }\n`\n\nReviewCard.DisLikeBtn = styled.span`\n  flex: 1;\n  padding: 7px;\n  transition: all 0.3s;\n  ${(props) =>\n    props.dislike &&\n    css`\n      color: #d9534f;\n      font-weight: bold;\n    `}\n\n  &:hover {\n    background: #d9534f;\n    color: #fff;\n    cursor: pointer;\n  }\n`\n\nclass ReviewItem extends React.Component {\n  render() {\n    const data = this.props.data\n    const like = +data.currentUserLike === 1\n    const dislike = +data.currentUserLike === -1\n    return (\n      <ReviewCard className=\"mb-2\">\n        <CardBody className=\"pb-2\">\n          <div className=\"mb-2\">\n            <table>\n              <tbody>\n                <tr>\n                  <td className=\"pr-2\" rowSpan=\"2\">\n                    <a\n                      href={data.fbLink}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      {...(!data.fbLink\n                        ? { onClick: (e) => e.preventDefault() }\n                        : {})}\n                    >\n                      <ReviewCard.UserImg\n                        src={\n                          data.fbPicture ||\n                          'https://graph.facebook.com/100/picture'\n                        }\n                        height=\"55\"\n                        alt=\"\"\n                      />\n                    </a>\n                  </td>\n                  <td>\n                    <a\n                      href={data.fbLink}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      {...(!data.fbLink\n                        ? { onClick: (e) => e.preventDefault() }\n                        : {})}\n                    >\n                      <ReviewCard.Username>{data.username}</ReviewCard.Username>\n                    </a>\n                    {!!data.currentUserPost && (\n                      <ReviewCard.DelBtn\n                        onClick={() => {\n                          this.props.onDel(data.key)\n                        }}\n                      >\n                        &times;\n                      </ReviewCard.DelBtn>\n                    )}\n                  </td>\n                </tr>\n                <tr>\n                  <td>\n                    <ReviewCard.Date>\n                      {moment(data.time)\n                        .utcOffset(8)\n                        .format('YYYY/MM/DD HH:mm:ss')}\n                    </ReviewCard.Date>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n          <div>\n            <ReviewCard.Title>\n              {data.cid ? `${data.cid} ` : ''}\n              {data.cname}\n              {data.teacher ? ` | ${data.teacher}` : ''}\n            </ReviewCard.Title>\n            <ReviewCard.Content>{data.content}</ReviewCard.Content>\n          </div>\n          <hr style={{ marginBottom: '5px' }} />\n          <div style={{ display: 'flex' }}>\n            <ReviewCard.LikeBtn\n              className=\"text-center\"\n              like={!!like}\n              onClick={() => {\n                this.props.onLike(1, data.currentUserLike, data.key)\n              }}\n            >\n              <i\n                className={`fa ${!!like ? 'fa-thumbs-up' : 'fa-thumbs-o-up'}`}\n                aria-hidden=\"true\"\n              ></i>{' '}\n              {data.like['1'] || 0}\n            </ReviewCard.LikeBtn>\n            <ReviewCard.DisLikeBtn\n              className=\"text-center\"\n              dislike={!!dislike}\n              onClick={() => {\n                this.props.onLike(-1, data.currentUserLike, data.key)\n              }}\n            >\n              <i\n                className={`fa ${\n                  !!dislike ? 'fa-thumbs-down' : 'fa-thumbs-o-down'\n                }`}\n                aria-hidden=\"true\"\n              ></i>{' '}\n              {data.like['-1'] || 0}\n            </ReviewCard.DisLikeBtn>\n          </div>\n        </CardBody>\n      </ReviewCard>\n    )\n  }\n}\n\nexport default class CourseReviewList extends React.Component {\n  componentWillReceiveProps() {\n    !!window.reviewListBricks && window.reviewListBricks.destroy()\n  }\n\n  componentDidUpdate() {\n    window.reviewListBricks = new window.Bricklayer(\n      document.querySelector('.bricklayer')\n    )\n  }\n\n  render() {\n    return (\n      <CardColumns className=\"mb-3 bricklayer\">\n        {this.props.reviewList.map((data, i) => {\n          return <ReviewItem key={i} data={data} {...this.props} />\n        })}\n      </CardColumns>\n    )\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Container,\n  Row,\n  Col,\n  Alert,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  FormGroup,\n  Label,\n  Input,\n  Button\n} from 'reactstrap'\nimport moment from 'moment'\nimport cloneDeep from 'lodash.clonedeep'\nimport styled from 'styled-components'\n\nimport CourseReviewFilter from './CourseReviewFilter.jsx'\nimport CourseReviewList from './CourseReviewList.jsx'\n\nconst RelativeContainer = styled(Container)`\n  background: #fff;\n  position: relative;\n`\n\nconst ThePen = styled.div`\n  background: #db4437;\n  color: #fff;\n  padding: 10px 15px 0px 15px;\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n  width: 52px;\n  height: 52px;\n  border-radius: 30px;\n  overflow: hidden;\n  cursor: pointer;\n  box-shadow: 1px 1px 5px 1px #bbbbbb;\n  transition: all 0.3s;\n  &:hover {\n    width: 180px;\n    box-shadow: 1px 1px 5px 1px #787878;\n  }\n\n  i.fa {\n    padding-bottom: 15px;\n    font-size: 30px;\n    margin-right: 10px;\n  }\n`\n\nconst ReviewListContainer = styled(Row)`\n  overflow: auto;\n  height: calc(100vh - 202px);\n`\n\nexport default class CourseReviewContainer extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      addReviewModalOpen: false,\n      reviewData: {},\n      likeData: {},\n      sortType: 1,\n      filterTags: []\n    }\n\n    this.db = window.firebase.database()\n    this.toggleAddReviewModal = this.toggleAddReviewModal.bind(this)\n    this.handleAddReview = this.handleAddReview.bind(this)\n    this.getReviewList = this.getReviewList.bind(this)\n    this.parseReviewList = this.parseReviewList.bind(this)\n    this.handleFilter = this.handleFilter.bind(this)\n    this.handleChangeSortType = this.handleChangeSortType.bind(this)\n    this.handleDelReview = this.handleDelReview.bind(this)\n    this.handleLike = this.handleLike.bind(this)\n\n    this.getReviewList()\n  }\n\n  getReviewList() {\n    let reviewData\n    let likeData\n    this.db\n      .ref('review')\n      .once('value')\n      .then((snapshot) => {\n        reviewData = snapshot.val() || {}\n      })\n      .then(() => {\n        this.db\n          .ref('likedReview')\n          .once('value')\n          .then((snapshot) => {\n            likeData = snapshot.val() || {}\n            this.setState({\n              reviewData,\n              likeData\n            })\n          })\n      })\n  }\n\n  parseReviewList() {\n    const reviewData = cloneDeep(this.state.reviewData)\n    const likeData = cloneDeep(this.state.likeData)\n    const uuid = this.context.user && this.context.user.uuid\n    let result = []\n    let likedCount = {}\n    Object.values(likeData).forEach((likeObj, i) => {\n      Object.keys(likeObj).forEach((reviewKey, j) => {\n        if (!likedCount[reviewKey]) likedCount[reviewKey] = {}\n        if (!likedCount[reviewKey][likeObj[reviewKey]])\n          likedCount[reviewKey][likeObj[reviewKey]] = 0\n        likedCount[reviewKey][likeObj[reviewKey]]++\n      })\n    })\n\n    for (let uid in reviewData) {\n      for (let reviewKey in reviewData[uid]) {\n        let reviewObj = JSON.parse(reviewData[uid][reviewKey])\n        // filter\n        let match = false\n        if (this.state.filterTags.length > 0) {\n          this.state.filterTags.some((keyword, i) => {\n            keyword = keyword.toLowerCase()\n            if (\n              reviewObj.cid.toLowerCase().includes(keyword) ||\n              reviewObj.cname.toLowerCase().includes(keyword) ||\n              reviewObj.teacher.toLowerCase().includes(keyword) ||\n              reviewObj.content.toLowerCase().includes(keyword)\n            ) {\n              match = true\n              return true\n            } else {\n              return false\n            }\n          })\n        } else {\n          match = true\n        }\n\n        // like or dislike\n        if (uuid && likeData[uuid] && likeData[uuid][reviewKey] !== undefined) {\n          reviewObj.currentUserLike = likeData[uuid][reviewKey]\n        }\n\n        // current user's post\n        if (uuid && uid === uuid) {\n          reviewObj.currentUserPost = true\n        }\n\n        !!match &&\n          result.push({\n            ...reviewObj,\n            key: reviewKey,\n            like: likedCount[reviewKey] || {}\n          })\n      }\n    }\n\n    if (this.state.sortType === 1) {\n      result.sort(this.compareByTime)\n    } else {\n      result.sort(this.compareByLike)\n    }\n\n    return result\n  }\n\n  compareByTime(a, b) {\n    if (moment(a.time).isBefore(moment(b.time))) return 1\n    if (moment(a.time).isBefore(moment(b.time))) return -1\n    return 0\n  }\n\n  compareByLike(a, b) {\n    if ((a.like['1'] || 0) < (b.like['1'] || 0)) return 1\n    if ((a.like['1'] || 0) > (b.like['1'] || 0)) return -1\n    return 0\n  }\n\n  toggleAddReviewModal() {\n    this.setState((prevState) => ({\n      addReviewModalOpen: !prevState.addReviewModalOpen\n    }))\n  }\n\n  handleAddReview() {\n    const cname = document.getElementById('ModalAddReview__inputCname').value\n    const cid = document.getElementById('ModalAddReview__inputCid').value\n    const teacher = document.getElementById('ModalAddReview__inputTeacher')\n      .value\n    const content = document.getElementById('ModalAddReview__inputContent')\n      .value\n    if (cname === '' || content === '') {\n      alert('課程名稱、評論不得為空')\n      return\n    }\n\n    const {\n      uuid: uid,\n      uid: fbid,\n      fbLink = null,\n      fbPicture = '',\n      displayName: username\n    } = this.context.user\n    const time = moment().format()\n    const randomKey = (\n      Date.now().toString(32) + Math.random().toString(32)\n    ).replace('.', '')\n    this.db\n      .ref(`review/${uid}/${randomKey}`)\n      .set(\n        JSON.stringify({\n          cname,\n          cid,\n          teacher,\n          content,\n          fbid,\n          fbLink,\n          fbPicture,\n          username,\n          time\n        })\n      )\n      .then(() => {\n        this.toggleAddReviewModal()\n        this.getReviewList()\n      })\n  }\n\n  handleFilter(filterTags) {\n    this.setState({\n      filterTags\n    })\n  }\n\n  handleChangeSortType(sortType) {\n    this.setState({\n      sortType\n    })\n  }\n\n  handleDelReview(key) {\n    if (window.confirm('確定刪除此篇評論？')) {\n      this.db\n        .ref(`review/${this.context.user.uuid}/${key}`)\n        .remove()\n        .then(() => {\n          this.getReviewList()\n        })\n    }\n  }\n\n  handleLike(btnType, currentUserLike, key) {\n    if (btnType === currentUserLike) {\n      this.db\n        .ref(`likedReview/${this.context.user.uuid}/${key}`)\n        .remove()\n        .then(() => {\n          this.getReviewList()\n        })\n    } else {\n      this.db\n        .ref(`likedReview/${this.context.user.uuid}/${key}`)\n        .set(btnType)\n        .then(() => {\n          this.getReviewList()\n        })\n    }\n  }\n\n  render() {\n    const reviewList = this.parseReviewList()\n    return (\n      <div>\n        {this.context.user && !this.context.user.uid && (\n          <Row>\n            <Col xs=\"12\">\n              <Alert className=\"text-center mt-3\" color=\"danger\">\n                請先登入\n              </Alert>\n            </Col>\n          </Row>\n        )}\n\n        {this.context.user && this.context.user.uid && (\n          <RelativeContainer>\n            <Row id=\"CourseReviewFilter__wrapper\">\n              <Col xs=\"12\">\n                <CourseReviewFilter\n                  filterTags={this.state.filterTags}\n                  onFilter={this.handleFilter}\n                  sortType={this.state.sortType}\n                  onChangeSortType={this.handleChangeSortType}\n                />\n              </Col>\n            </Row>\n            <hr />\n            <ReviewListContainer>\n              <Col xs=\"12\">\n                <CourseReviewList\n                  reviewList={reviewList}\n                  onDel={this.handleDelReview}\n                  onLike={this.handleLike}\n                />\n              </Col>\n            </ReviewListContainer>\n            <ThePen onClick={this.toggleAddReviewModal}>\n              <i className=\"fa fa-pencil\" aria-hidden=\"true\"></i>留下一則評論...\n            </ThePen>\n            <Modal\n              size=\"lg\"\n              isOpen={this.state.addReviewModalOpen}\n              toggle={this.toggleAddReviewModal}\n            >\n              <ModalHeader toggle={this.toggleAddReviewModal}>\n                留下一則評論\n              </ModalHeader>\n              <ModalBody>\n                <FormGroup row>\n                  <Label\n                    className=\"text-danger\"\n                    for=\"ModalAddReview__inputCname\"\n                    sm={2}\n                  >\n                    課程名稱*\n                  </Label>\n                  <Col sm={10}>\n                    <Input type=\"text\" id=\"ModalAddReview__inputCname\" />\n                  </Col>\n                </FormGroup>\n                <FormGroup row>\n                  <Label for=\"ModalAddReview__inputCid\" sm={2}>\n                    課號\n                  </Label>\n                  <Col sm={10}>\n                    <Input type=\"text\" id=\"ModalAddReview__inputCid\" />\n                  </Col>\n                </FormGroup>\n                <FormGroup row>\n                  <Label for=\"ModalAddReview__inputTeacher\" sm={2}>\n                    教師\n                  </Label>\n                  <Col sm={10}>\n                    <Input type=\"text\" id=\"ModalAddReview__inputTeacher\" />\n                  </Col>\n                </FormGroup>\n                <FormGroup row>\n                  <Label\n                    className=\"text-danger\"\n                    for=\"ModalAddReview__inputContent\"\n                    sm={2}\n                  >\n                    評論*\n                  </Label>\n                  <Col sm={10}>\n                    <Input\n                      type=\"textarea\"\n                      name=\"text\"\n                      rows=\"5\"\n                      id=\"ModalAddReview__inputContent\"\n                    />\n                  </Col>\n                </FormGroup>\n              </ModalBody>\n              <ModalFooter>\n                <Button color=\"primary\" block onClick={this.handleAddReview}>\n                  送出\n                </Button>\n              </ModalFooter>\n            </Modal>\n          </RelativeContainer>\n        )}\n      </div>\n    )\n  }\n}\n\nCourseReviewContainer.contextTypes = {\n  user: PropTypes.object\n}\n","import React from 'react'\n\nimport App from './App.jsx'\nimport CourseReviewContainer from './CourseReviewContainer.jsx'\n\nexport default class CourseReview extends React.Component {\n  render() {\n    return (\n      <App {...this.props}>\n        <CourseReviewContainer />\n      </App>\n    )\n  }\n}\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (!isLocalhost) {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl)\n      } else {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.')\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n            }\n          }\n        }\n      }\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { HashRouter as Router, Route, Redirect, Switch } from 'react-router-dom'\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nimport Home from './Home.jsx'\nimport Exchange from './Exchange.jsx'\nimport Share from './Share.jsx'\nimport CourseReview from './CourseReview.jsx'\n\nimport registerServiceWorker from './registerServiceWorker'\n\n// Initialize Firebase\nconst config = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID\n}\nwindow.firebase.initializeApp(config)\n\nReactDOM.render(\n  <Router>\n    <Switch>\n      <Route exact path=\"/\" component={Home} />\n      <Route path=\"/exchange\" component={Exchange} />\n      <Route exact path=\"/share/:hash\" component={Share} />\n      <Route path=\"/review\" component={CourseReview} />\n      <Redirect from=\"*\" to=\"/\" />\n    </Switch>\n  </Router>,\n  document.getElementById('app')\n)\nregisterServiceWorker()\n"],"sourceRoot":""}